<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="CORE_RESETTING_PASSWORD" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="com.mitian.airad.model.CoreResettingPassword" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Feb 17 10:43:23 CST 2011.
    -->
    <result column="RESETTING_ID" property="resettingId" jdbcType="INTEGER" />
    <result column="MEMBER_ID" property="memberId" jdbcType="LONG" />
    <result column="RESETTING_TIME" property="resettingTime" jdbcType="TIMESTAMP" />
    <result column="SEND_COUNT" property="sendCount" jdbcType="INTEGER" />
    <result column="ADD_OPER" property="addOper" jdbcType="VARCHAR" />
    <result column="ADD_TIME" property="addTime" jdbcType="TIMESTAMP" />
    <result column="STATUS" property="status" jdbcType="CHAR" />
    <result column="RESETTING_TYPE" property="resettingType" jdbcType="CHAR" />
	<result column="CIPHERTEXT" property="ciphertext" jdbcType="VARCHAR" />
  </resultMap>
   <!--  根据会员Id和时间查询 -->
    <select id="ibatorgenerated_selectByMemberIdAndResettingPassword" resultClass="com.mitian.airad.model.CoreResettingPassword" parameterClass="java.util.HashMap" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Feb 12 11:28:05 CST 2011.
    -->
    select RESETTING_ID, MEMBER_ID, RESETTING_TIME, SEND_COUNT, ADD_OPER, ADD_TIME, STATUS,RESETTING_TYPE,CIPHERTEXT
    from CORE_RESETTING_PASSWORD
    where MEMBER_ID = #memberId#  and
     <![CDATA[ RESETTING_TIME>= #startTime# and RESETTING_TIME <= #endTime#]]>
  </select>

  <!-- 根据会员Id及类型查询-->
  <select id="ibatorgenerated_selectByMemberId"  resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.mitian.airad.model.CoreResettingPassword" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Feb 12 11:28:05 CST 2011.
    -->
    select RESETTING_ID, MEMBER_ID, RESETTING_TIME, SEND_COUNT, ADD_OPER, ADD_TIME, STATUS,RESETTING_TYPE,CIPHERTEXT
    from CORE_RESETTING_PASSWORD
    where MEMBER_ID = #memberId# and RESETTING_TYPE = #resettingType#
  </select>


  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.mitian.airad.model.CoreResettingPassword" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Feb 17 10:43:23 CST 2011.
    -->
    select RESETTING_ID, MEMBER_ID, RESETTING_TIME, SEND_COUNT, ADD_OPER, ADD_TIME, STATUS,CIPHERTEXT,
      RESETTING_TYPE
    from CORE_RESETTING_PASSWORD
    where RESETTING_ID = #resettingId:INTEGER#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.mitian.airad.model.CoreResettingPassword" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Feb 17 10:43:23 CST 2011.
    -->
    delete from CORE_RESETTING_PASSWORD
    where RESETTING_ID = #resettingId:INTEGER#
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.mitian.airad.model.CoreResettingPassword" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Feb 17 10:43:23 CST 2011.
    -->
    insert into CORE_RESETTING_PASSWORD (RESETTING_ID, MEMBER_ID, RESETTING_TIME, SEND_COUNT,
      ADD_OPER, ADD_TIME, STATUS, RESETTING_TYPE,CIPHERTEXT)
    values (#resettingId:INTEGER#, #memberId:LONG#, #resettingTime:TIMESTAMP#,
      #sendCount:INTEGER#, #addOper:VARCHAR#, #addTime:TIMESTAMP#, #status:CHAR#,
      #resettingType:CHAR#,#ciphertext:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.mitian.airad.model.CoreResettingPassword" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Feb 17 10:43:23 CST 2011.
    -->
    insert into CORE_RESETTING_PASSWORD
    <dynamic prepend="(" >
      <isNotNull prepend="," property="resettingId" >
        RESETTING_ID
      </isNotNull>
      <isNotNull prepend="," property="memberId" >
        MEMBER_ID
      </isNotNull>
      <isNotNull prepend="," property="resettingTime" >
        RESETTING_TIME
      </isNotNull>
      <isNotNull prepend="," property="sendCount" >
        SEND_COUNT
      </isNotNull>
      <isNotNull prepend="," property="addOper" >
        ADD_OPER
      </isNotNull>
      <isNotNull prepend="," property="addTime" >
        ADD_TIME
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS
      </isNotNull>
      <isNotNull prepend="," property="resettingType" >
        RESETTING_TYPE
      </isNotNull>
	   <isNotNull prepend="," property="ciphertext" >
        CIPHERTEXT
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="resettingId" >
        #resettingId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="memberId" >
        #memberId:LONG#
      </isNotNull>
      <isNotNull prepend="," property="resettingTime" >
        #resettingTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="sendCount" >
        #sendCount:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="addOper" >
        #addOper:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="addTime" >
        #addTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        #status:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="resettingType" >
        #resettingType:CHAR#
      </isNotNull>
	  <isNotNull prepend="," property="ciphertext" >
        #ciphertext:VARCHAR#
      </isNotNull>
      )
    </dynamic>
     <selectKey resultClass="int" keyProperty="resettingId" type="post" >
               SELECT @@IDENTITY AS ID
     </selectKey>
  </insert>
   <!-- my sql -->
      <update id="updateTaging" parameterClass="com.mitian.airad.model.CoreResettingPassword">
         update CORE_RESETTING_PASSWORD  set STATUS = #status:CHAR# 
         where  MEMBER_ID = #memberId:LONG# and RESETTING_TYPE= #resettingType:CHAR#
      </update>
   <update id="updateResettingPasswordHistory" parameterClass="com.mitian.airad.model.CoreResettingPassword" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Feb 17 10:43:23 CST 2011.
    -->
    update CORE_RESETTING_PASSWORD
    <dynamic prepend="set" >
      <isNotNull prepend="," property="memberId" >
        MEMBER_ID = #memberId:LONG#
      </isNotNull>
      <isNotNull prepend="," property="resettingTime" >
        RESETTING_TIME = #resettingTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="sendCount" >
        SEND_COUNT = #sendCount:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="addOper" >
        ADD_OPER = #addOper:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="addTime" >
        ADD_TIME = #addTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS = #status:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="resettingType" >
        RESETTING_TYPE = #resettingType:CHAR#
      </isNotNull>
    <isNotNull prepend="," property="ciphertext" >
        CIPHERTEXT = #ciphertext:VARCHAR#
      </isNotNull>
    </dynamic>
    where  MEMBER_ID = #memberId:LONG# and  RESETTING_TYPE = #resettingType:CHAR#
  </update>
   
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.mitian.airad.model.CoreResettingPassword" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Feb 17 10:43:23 CST 2011.
    -->
    update CORE_RESETTING_PASSWORD
    <dynamic prepend="set" >
      <isNotNull prepend="," property="memberId" >
        MEMBER_ID = #memberId:LONG#
      </isNotNull>
      <isNotNull prepend="," property="resettingTime" >
        RESETTING_TIME = #resettingTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="sendCount" >
        SEND_COUNT = #sendCount:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="addOper" >
        ADD_OPER = #addOper:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="addTime" >
        ADD_TIME = #addTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS = #status:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="resettingType" >
        RESETTING_TYPE = #resettingType:CHAR#
      </isNotNull>
	  <isNotNull prepend="," property="ciphertext" >
        CIPHERTEXT = #ciphertext:VARCHAR#
      </isNotNull>
    </dynamic>
    where RESETTING_ID = #resettingId:INTEGER#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.mitian.airad.model.CoreResettingPassword" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Feb 17 10:43:23 CST 2011.
    -->
    update CORE_RESETTING_PASSWORD
    set MEMBER_ID = #memberId:LONG#,
      RESETTING_TIME = #resettingTime:TIMESTAMP#,
      SEND_COUNT = #sendCount:INTEGER#,
      ADD_OPER = #addOper:VARCHAR#,
      ADD_TIME = #addTime:TIMESTAMP#,
      STATUS = #status:CHAR#,
      RESETTING_TYPE = #resettingType:CHAR#,
	  CIPHERTEXT = #ciphertext:VARCHAR#
    where RESETTING_ID = #resettingId:INTEGER#
  </update>
</sqlMap>