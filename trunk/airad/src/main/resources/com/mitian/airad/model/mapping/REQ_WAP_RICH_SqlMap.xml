<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="REQ_WAP_RICH" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="com.mitian.airad.model.ReqWapRich" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Mar 18 17:22:15 CST 2011.
    -->
    <result column="GUIDE_ID" property="guideId" jdbcType="INTEGER" />
    <result column="REQ_TIME" property="reqTime" jdbcType="TIMESTAMP" />
    <result column="PROVINCE" property="province" jdbcType="SMALLINT" />
    <result column="CITY" property="city" jdbcType="SMALLINT" />
    <result column="AREA" property="area" jdbcType="SMALLINT" />
    <result column="REQ_TYPE" property="reqType" jdbcType="CHAR" />
    <result column="OFFER" property="offer" jdbcType="DECIMAL" />
    <result column="CAMPAIGN_ID" property="campaignId" jdbcType="INTEGER" />
    <result column="AD_GROUP_ID" property="adGroupId" jdbcType="INTEGER" />
    <result column="AD_ID" property="adId" jdbcType="INTEGER" />
    <result column="ADVERTISER_ID" property="advertiserId" jdbcType="INTEGER" />
    <result column="DEV_ID" property="devId" jdbcType="INTEGER" />
    <result column="AGENT_ID" property="agentId" jdbcType="INTEGER" />
    <result column="FLAG" property="flag" jdbcType="CHAR" />
    <result column="APP_CODE" property="appCode" jdbcType="VARCHAR" />
    <result column="DEVICE_SCREEN_WIDTH" property="deviceScreenWidth" jdbcType="CHAR" />
    <result column="DEVICE_SCREEN_HEIGHT" property="deviceScreenHeight" jdbcType="CHAR" />
    <result column="AD_CONTENT_ONLINE_IP" property="adContentOnlineIp" jdbcType="VARCHAR" />
    <result column="AD_CONTENT_ONLINE_USER_AGENT" property="adContentOnlineUserAgent" jdbcType="VARCHAR" />
    <result column="LATITUDE" property="latitude" jdbcType="VARCHAR" />
    <result column="LONGITUDE" property="longitude" jdbcType="VARCHAR" />
  </resultMap>
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.mitian.airad.model.ReqWapRich" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Mar 18 17:22:15 CST 2011.
    -->
    select GUIDE_ID, REQ_TIME, PROVINCE, CITY, AREA, REQ_TYPE, OFFER, CAMPAIGN_ID, AD_GROUP_ID,
      AD_ID, ADVERTISER_ID, DEV_ID, AGENT_ID, FLAG, APP_CODE, DEVICE_SCREEN_WIDTH,
      DEVICE_SCREEN_HEIGHT, AD_CONTENT_ONLINE_IP, AD_CONTENT_ONLINE_USER_AGENT, LATITUDE, LONGITUDE
    from REQ_WAP_RICH
    where GUIDE_ID = #guideId:INTEGER#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.mitian.airad.model.ReqWapRich" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Mar 18 17:22:15 CST 2011.
    -->
    delete from REQ_WAP_RICH
    where GUIDE_ID = #guideId:INTEGER#
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.mitian.airad.model.ReqWapRich" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Mar 18 17:22:15 CST 2011.
    -->
    insert into REQ_WAP_RICH (GUIDE_ID, REQ_TIME, PROVINCE, CITY, AREA, REQ_TYPE, OFFER,
      CAMPAIGN_ID, AD_GROUP_ID, AD_ID, ADVERTISER_ID, DEV_ID, AGENT_ID, FLAG, APP_CODE,
      DEVICE_SCREEN_WIDTH, DEVICE_SCREEN_HEIGHT, AD_CONTENT_ONLINE_IP, AD_CONTENT_ONLINE_USER_AGENT,
      LATITUDE, LONGITUDE)
    values (#guideId:INTEGER#, #reqTime:TIMESTAMP#, #province:SMALLINT#, #city:SMALLINT#,
      #area:SMALLINT#, #reqType:CHAR#, #offer:DECIMAL#, #campaignId:INTEGER#, #adGroupId:INTEGER#,
      #adId:INTEGER#, #advertiserId:INTEGER#, #devId:INTEGER#, #agentId:INTEGER#, #flag:CHAR#,
      #appCode:VARCHAR#, #deviceScreenWidth:CHAR#, #deviceScreenHeight:CHAR#,
      #adContentOnlineIp:VARCHAR#, #adContentOnlineUserAgent:VARCHAR#, #latitude:VARCHAR#,
      #longitude:VARCHAR#)
  </insert>
 <insert id="ibatorgenerated_insertSelective" parameterClass="com.mitian.airad.model.ReqWapRich" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Mar 18 17:22:15 CST 2011.
    -->
    insert into REQ_WAP_RICH
    <dynamic prepend="(" >
      <isNotNull prepend="," property="guideId" >
        GUIDE_ID
      </isNotNull>
      <isNotNull prepend="," property="reqTime" >
        REQ_TIME
      </isNotNull>
      <isNotNull prepend="," property="province" >
        PROVINCE
      </isNotNull>
      <isNotNull prepend="," property="city" >
        CITY
      </isNotNull>
      <isNotNull prepend="," property="area" >
        AREA
      </isNotNull>
      <isNotNull prepend="," property="reqType" >
        REQ_TYPE
      </isNotNull>
      <isNotNull prepend="," property="offer" >
        OFFER
      </isNotNull>
      <isNotNull prepend="," property="campaignId" >
        CAMPAIGN_ID
      </isNotNull>
      <isNotNull prepend="," property="adGroupId" >
        AD_GROUP_ID
      </isNotNull>
      <isNotNull prepend="," property="adId" >
        AD_ID
      </isNotNull>
      <isNotNull prepend="," property="advertiserId" >
        ADVERTISER_ID
      </isNotNull>
      <isNotNull prepend="," property="devId" >
        DEV_ID
      </isNotNull>
      <isNotNull prepend="," property="agentId" >
        AGENT_ID
      </isNotNull>
      <isNotNull prepend="," property="flag" >
        FLAG
      </isNotNull>
      <isNotNull prepend="," property="appCode" >
        APP_CODE
      </isNotNull>
      <isNotNull prepend="," property="deviceScreenWidth" >
        DEVICE_SCREEN_WIDTH
      </isNotNull>
      <isNotNull prepend="," property="deviceScreenHeight" >
        DEVICE_SCREEN_HEIGHT
      </isNotNull>
      <isNotNull prepend="," property="adContentOnlineIp" >
        AD_CONTENT_ONLINE_IP
      </isNotNull>
      <isNotNull prepend="," property="adContentOnlineUserAgent" >
        AD_CONTENT_ONLINE_USER_AGENT
      </isNotNull>
      <isNotNull prepend="," property="latitude" >
        LATITUDE
      </isNotNull>
      <isNotNull prepend="," property="longitude" >
        LONGITUDE
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="guideId" >
        #guideId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="reqTime" >
        #reqTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="province" >
        #province:SMALLINT#
      </isNotNull>
      <isNotNull prepend="," property="city" >
        #city:SMALLINT#
      </isNotNull>
      <isNotNull prepend="," property="area" >
        #area:SMALLINT#
      </isNotNull>
      <isNotNull prepend="," property="reqType" >
        #reqType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="offer" >
        #offer:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="campaignId" >
        #campaignId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="adGroupId" >
        #adGroupId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="adId" >
        #adId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="advertiserId" >
        #advertiserId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="devId" >
        #devId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="agentId" >
        #agentId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="flag" >
        #flag:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="appCode" >
        #appCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deviceScreenWidth" >
        #deviceScreenWidth:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="deviceScreenHeight" >
        #deviceScreenHeight:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="adContentOnlineIp" >
        #adContentOnlineIp:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="adContentOnlineUserAgent" >
        #adContentOnlineUserAgent:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="latitude" >
        #latitude:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="longitude" >
        #longitude:VARCHAR#
      </isNotNull>
      )
    </dynamic>
		<selectKey resultClass="int" keyProperty="guideId" type="post" >
            SELECT @@IDENTITY AS guideId
       </selectKey>
  </insert>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.mitian.airad.model.ReqWapRich" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Mar 18 17:22:15 CST 2011.
    -->
    update REQ_WAP_RICH
    <dynamic prepend="set" >
      <isNotNull prepend="," property="reqTime" >
        REQ_TIME = #reqTime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="province" >
        PROVINCE = #province:SMALLINT#
      </isNotNull>
      <isNotNull prepend="," property="city" >
        CITY = #city:SMALLINT#
      </isNotNull>
      <isNotNull prepend="," property="area" >
        AREA = #area:SMALLINT#
      </isNotNull>
      <isNotNull prepend="," property="reqType" >
        REQ_TYPE = #reqType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="offer" >
        OFFER = #offer:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="campaignId" >
        CAMPAIGN_ID = #campaignId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="adGroupId" >
        AD_GROUP_ID = #adGroupId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="adId" >
        AD_ID = #adId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="advertiserId" >
        ADVERTISER_ID = #advertiserId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="devId" >
        DEV_ID = #devId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="agentId" >
        AGENT_ID = #agentId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="flag" >
        FLAG = #flag:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="appCode" >
        APP_CODE = #appCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deviceScreenWidth" >
        DEVICE_SCREEN_WIDTH = #deviceScreenWidth:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="deviceScreenHeight" >
        DEVICE_SCREEN_HEIGHT = #deviceScreenHeight:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="adContentOnlineIp" >
        AD_CONTENT_ONLINE_IP = #adContentOnlineIp:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="adContentOnlineUserAgent" >
        AD_CONTENT_ONLINE_USER_AGENT = #adContentOnlineUserAgent:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="latitude" >
        LATITUDE = #latitude:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="longitude" >
        LONGITUDE = #longitude:VARCHAR#
      </isNotNull>
    </dynamic>
    where GUIDE_ID = #guideId:INTEGER#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.mitian.airad.model.ReqWapRich" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Mar 18 17:22:15 CST 2011.
    -->
    update REQ_WAP_RICH
    set REQ_TIME = #reqTime:TIMESTAMP#,
      PROVINCE = #province:SMALLINT#,
      CITY = #city:SMALLINT#,
      AREA = #area:SMALLINT#,
      REQ_TYPE = #reqType:CHAR#,
      OFFER = #offer:DECIMAL#,
      CAMPAIGN_ID = #campaignId:INTEGER#,
      AD_GROUP_ID = #adGroupId:INTEGER#,
      AD_ID = #adId:INTEGER#,
      ADVERTISER_ID = #advertiserId:INTEGER#,
      DEV_ID = #devId:INTEGER#,
      AGENT_ID = #agentId:INTEGER#,
      FLAG = #flag:CHAR#,
      APP_CODE = #appCode:VARCHAR#,
      DEVICE_SCREEN_WIDTH = #deviceScreenWidth:CHAR#,
      DEVICE_SCREEN_HEIGHT = #deviceScreenHeight:CHAR#,
      AD_CONTENT_ONLINE_IP = #adContentOnlineIp:VARCHAR#,
      AD_CONTENT_ONLINE_USER_AGENT = #adContentOnlineUserAgent:VARCHAR#,
      LATITUDE = #latitude:VARCHAR#,
      LONGITUDE = #longitude:VARCHAR#
    where GUIDE_ID = #guideId:INTEGER#
  </update>
  <!-- 根据广告ID查出点击数 -->
  <select id="findByAdIdCount" parameterClass="com.mitian.airad.model.ReqBanner" resultClass="int">
 select count(*)count from REQ_BANNER where FLAG = '0' and AD_ID = #adId# 
  </select>
</sqlMap>