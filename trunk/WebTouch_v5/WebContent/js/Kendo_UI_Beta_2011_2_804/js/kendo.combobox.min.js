(function(a,b){var c=window.kendo,d=c.ui,e=d.List,f=d.Select,g="click",h="disabled",i="change",j="t-state-disabled",k="select",l="t-state-selected",m="t-state-hover",n="mouseenter mouseleave",o=".t-dropdown-wrap",p=a.proxy,q=f.extend({init:function(b,c){var d=this;c=a.isArray(c)?{dataSource:c}:c,f.fn.init.call(d,b,c),d._wrapper(),d._input(),d._popup(),d._accessors(),d._dataSource(),d.bind([i],d.options),d.input.bind({keydown:p(d._keydown,d),blur:function(){d._bluring=setTimeout(function(){d._current||d.text(d.text()),clearTimeout(d._typing),d._blur()},100)}}),d.element.prop("disabled")&&(d.options.enable=!1),d.enable(d.options.enable),d.previous=d.value(),d.options.autoBind?d._select():d.element.is(k)&&d.input.val(d.element.children(":selected").text())},options:{enable:!0,index:-1,autoBind:!0,delay:200,dataTextField:"text",dataValueField:"value",minLength:1,height:200,highlightFirst:!0,filter:"none",suggest:!1},current:function(a){var b=this,c=b._current;c&&c.removeClass(l),f.fn.current.call(b,a)},enable:function(a){var b=this,c=b.element,d=b.wrapper,e=b.input,f=b.arrow;a===!1?(d.addClass(j).children(o).unbind(n),e.attr(h,h),c.attr(h,h),f.unbind(g)):(d.removeClass(j).children(o).bind(n,b._toggleHover),e.removeAttr(h),c.removeAttr(h),f.bind(g,p(b.toggle,b)))},open:function(){var a=this,b=a._selected;!a.ul[0].firstChild||a._filtered&&b?(a.options.autoBind=!1,a._filtered=!1,a._select()):(a.popup.open(),b&&a._scroll(b[0]))},refresh:function(){var b=this,d=b.ul,e=b.options,f=e.suggest,g=e.height,h=b.dataSource.view(),i=h.length;d[0].innerHTML=c.render(b.template,h),b._height(i),b.element.is(k)&&b._options(h),i&&((f||e.highlightFirst)&&b.current(a(b.ul[0].firstChild)),f&&b.suggest(b._current)),e.autoBind||b.toggle(!!i),b.hideBusy()},select:function(a){var c=this,d,e,f=c._highlight(a),g=c.dataSource.view();f!==-1&&(c._selected=c._current.addClass(l),g=g[f],d=c._text(g),e=c._value(g),c.input[0].value=d,c.element[0].value=e!==b?e:d)},search:function(a){var b=this,a=a||b.text(),c=a.length,d=b.options,e=d.filter;clearTimeout(b._typing),c?c>=d.minLength&&(b.showBusy(),e==="none"?b._filter(a):(b._filtered=!0,d.autoBind=!1,b.dataSource.filter({field:d.dataTextField,operator:e,value:a}))):b.close()},suggest:function(a){var b=this,c=b.input[0],d=b.text(),f=e.caret(c);typeof a!="string"&&(a=a?a.text():""),f<=0&&(f=d.toLowerCase().indexOf(a.toLowerCase())+1),a||(a=d.substring(0,f)),a!==d&&(b.text(a),e.selectText(c,f,a.length))},text:function(a){var c=this,d=c.input[0];if(a!==b)c.select(function(b){return c._text(b)===a}),c._selected||(c._customOption(a),c.element.val(a)),d.value=a;else return d.value},toggle:function(a){var b=this;b.input[0].focus(),clearTimeout(b._bluring),typeof a!="boolean"&&(a=!b.popup.visible()),b[a?"open":"close"]()},value:function(c){var d=this,e=d.element;if(c===b)return e.val();var f=d.dataSource.view(),g;f[0]&&(g=a.map(f,function(a,e){var f=d._value(a);f===b&&(f=d._text(a));if(f==c)return e})[0]),g!==b?d.select(g):(d.current(null),d._customOption(c),e.val(c),d.text(c)),d.previous=e.val()},_toggleHover:function(b){a(b.currentTarget).toggleClass(m,b.type=="mouseenter")},_accept:function(a){var b=this,c;a?b._focus(a):(c=b.previous,b.value(b.text()),b.previous=c,b._change())},_clear:function(){var a=this;a.text()||a.current(null)},_customOption:function(b){var c=this,d=c.element,e=c._custom;d.is(k)&&(e||(e=c._custom=a("<option/>"),d.append(e)),e.text(b))},_filter:function(a){var c=this,d=c.options,a=a.toLowerCase(),e=c.dataSource,f=function(d){var e=c._text(d);if(e!==b)return(e+"").toLowerCase().indexOf(a)===0};c.ul[0].firstChild?(c._highlight(f)!==-1&&(d.suggest&&c._current&&c.suggest(c._current),c.open()),c.hideBusy()):(d.autoBind=!0,e.bind(i,function(){c.search(a),e.unbind(i,handler)}).query())},_highlight:function(b){var c=this,d=0,e=-1,f,g="",h,i=c.dataSource.view(),j=c.ul[0].childNodes;c.current(null);if(typeof b=="function")for(d=0,f=i.length;d<f;d++)if(b(i[d])){b=d;break}if(typeof b=="number"){if(b<0)return e;b=a(j[b])}b[0]&&!b.hasClass("t-state-focused")&&(e=a.inArray(b[0],j),e!==-1&&c.current(b));return e},_input:function(){var a=this,b=a.element[0],c=a.wrapper,d=".t-input",e;e=c.find(d),e[0]||(c.append('<div class="t-dropdown-wrap t-state-default"><input class="t-input" type="text" autocomplete="off"></input><span class="t-select"><span class="t-icon t-arrow-down">select</span></span></div>').append(a.element),e=c.find(d)),e[0].style.cssText=b.style.cssText,e.addClass(b.className).show(),a._focused=a.input=e,a.arrow=c.find(".t-icon")},_keydown:function(a){var b,d=this,e=a.keyCode,f=c.keys,g=d._current;a.altKey?d.toggle(e===f.DOWN):e===f.DOWN?(d._move(g?g.next():d.ul.children().first()),b=!0):e===f.UP?(d._move(g?g.prev():d.ul.children().last()),b=!0):e===f.ENTER||e===f.TAB?d._accept(g):e===f.ESC?d.close():d._search(),b&&a.preventDefault(),setTimeout(p(d._clear,d))},_search:function(){var a=this;clearTimeout(a._typing),a._typing=setTimeout(function(){var b=a.text();a._previousText!==b&&(a._previousText=b,a.search(b))},a.options.delay)},_select:function(){var a=this,b=a.dataSource,c=function(){var d=a.value();d?a.value(d):a.select(a.options.index),a.previous=a.value(),b.unbind(i,c)};b.bind(i,c),a.showBusy(),b.query()},_wrapper:function(){var a=this,b=a.element,c;c=b.parent(),c.is("div.t-widget")||(c=b.hide().wrap("<div />").parent()),a.wrapper=c.addClass("t-widget t-combobox t-header")}});d.plugin("ComboBox",q)})(jQuery)