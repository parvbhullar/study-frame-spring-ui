(function(a,b){function r(a,b){if(a===b)return!0;var c=e(a),d=e(b),f;if(c!==d)return!1;if(c==="date")return a.getTime()===b.getTime();if(c!=="object"&&c!=="array")return!1;for(f in a)if(!r(a[f],b[f]))return!1;return!0}var c=window.kendo,d=a.extend,e=a.type,f=c.getter,g=c.setter,h=c.accessor,i="change",j="UPDATED",k="PRISTINE",l="CREATED",m="DESTROYED",n="create",o="destroy",p="update",q=c.Observable,s=q.extend({init:function(a){var c=this;q.fn.init.call(c),c.state=k,c._accessors={},c._modified=!1,c.data=d(!0,{},a),c.pristine=d(!0,{},a),c.id()===b&&(c.state=l,c.data.__id=c.guid())},guid:function(){var a="",b,c;for(b=0;b<32;b++){c=Math.random()*16|0;if(b==8||b==12||b==16||b==20)a+="-";a+=(b==12?4:b==16?c&3|8:c).toString(16)}return a},accessor:function(a){var b=this._accessors;return b[a]=b[a]||h(a)},get:function(a){var b=this,c=b.accessor(a);return c.get(b.data)},set:function(a,b){var c=this,d,e={},f;typeof a=="string"?e[a]=b:e=a,c._modified=!1;for(d in e)f=c.accessor(d),b=e[d],r(b,f.get(c.data))||(f.set(c.data,b),c._modified=!0);c._modified&&(c.state=c.isNew()?l:j,c.trigger(i))},isNew:function(){return this.state===l},destroy:function(){this.state=m},changes:function(){var a=null,b,c=this,d=c.data,e=c.pristine;for(b in d)b!=="__id"&&!r(e[b],d[b])&&(a=a||{},a[b]=d[b]);return a}});s.define=function(c){var d,e=c||{},h=e.id||"id",i,j;a.isFunction(h)?(j=h,i=h):(j=f(h),i=g(h)),h=function(a,c){if(c===b)return a.__id||j(a);i(a,c)},e.id=function(a){return h(this.data,a)},d=s.extend(e),d.id=h,e.fields&&(d.fields=e.fields);return d};var t=q.extend({init:function(a){var b=this;q.call(b),b.options=a,b.data=[],b.map={},b.models={},b.bind([n,p,o],a)},model:function(a){var b=this,c=a&&b.models[a];c||(c=new b.options.model(b.find(a)),b.models[c.id()]=c,c.bind(i,function(){b.trigger(p,{model:c})}));return c},changes:function(a){var b=this,c=b.models[a];if(c&&c.state===j)return c.changes()},hasChanges:function(a){var c=this,d,e=c.models,a;if(a===b){for(a in e)if(e[a].state!==k)return!0;return!1}d=e[a];return!!d&&d.state===j},find:function(a){return this.data[this.map[a]]},refresh:function(a){var b=this,c=b.options.model.id,d,e,f={};for(d=0,e=a.length;d<e;d++)f[c(a[d])]=d;b.map=f,b.data=a},select:function(a,b){var c=this.models,d=[],e,b=b||function(a){return a},f;for(f in c)e=c[f],e.state===a&&d.push(b(e));return d},sync:function(b){var c=this.select(j),d=this.options.model,e=this.models,f;a.each(c,function(){var c=this.id();a.each(b,function(){c===d.id(this)&&delete e[c]})})},clear:function(a){this.models={}},merge:function(b,c){var d=this,e,f,g=d.options.model;a.each(c,function(a,c){e=b[a],e&&(f=g.id(e),a=d.map[f],a>=0&&(d.data[a]=c))}),d.refresh(c)},create:function(a,c){var d=this,e=d.data,f=d.model();typeof a!="number"&&(c=a,a=b),f.set(c),a=a!==b?a:e.length,e.splice(a,0,f.data),d.refresh(e),d.trigger(n,{model:f});return f},update:function(a,b){var c=this,d=c.model(a);d&&d.set(b)},destroy:function(a){var b=this,c=b.model(a);c&&(b.data.splice(b.map[a],1),c.destroy(),b.refresh(b.data),b.trigger(o,{model:c}))}});c.data.Model=s,c.data.ModelSet=t,s.UPDATED=j,s.PRISTINE=k,s.CREATED=l,s.DESTROYED=m})(jQuery)