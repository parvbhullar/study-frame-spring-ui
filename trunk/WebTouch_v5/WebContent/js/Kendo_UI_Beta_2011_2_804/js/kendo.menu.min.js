(function(a,b){function y(b,c){try{return a.contains(b,c)}catch(d){return!1}}function x(a){var b=a.parent();return{effects:b.hasClass("t-menu")?b.hasClass("t-menu-vertical")?"slideIn:right":"slideIn:down":"slideIn:right"}}var c=b.kendo,d=c.ui,e=a.extend,f=a.proxy,g=c.template,h=d.Component,i="open",j="close",k="select",l="mouseenter",m="mouseleave",n="click",o="timer",p=":empty",q="img",r="kendoPopup",s="t-state-default",t="t-state-disabled",u=".t-item.t-state-disabled",v=".t-item:not(.t-state-disabled)",w=".t-item:not(.t-state-disabled) > .t-link",z=h.extend({init:function(b,c){b=a(b);var d=this;h.fn.init.call(d,b,c),c=d.options,d._updateClasses(),c.animation===!1&&(c.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}}),d.nextItemZIndex=100,b.delegate(u,n,!1),b.delegate(v,l,f(d._mouseenter,d)).delegate(v,m,f(d._mouseleave,d)).delegate(v,n,f(d._click,d)),b.delegate(w,l+" "+m,d._toggleHover),a(document).click(a.proxy(d._documentClick,d)),d.bind([i,j,k],d.options)},options:{animation:{open:{duration:200,show:!0},close:{duration:100,show:!1,hide:!0}},orientation:"horizontal",openOnClick:!1,hoverDelay:100},enable:function(a,b){b!==!1&&(b=!0),this._toggleDisabled(a,b)},disable:function(a){this._toggleDisabled(a,!1)},append:function(b,c){var d=this,e=d._insert(b,c,c.find("> .t-group, .t-animation-container > .t-group"));a.each(e.items,function(){e.group.append(this),d._updateFirstLast(this)}),d._updateArrow(c),d._updateFirstLast(c.find(".t-first, .t-last"))},insertBefore:function(b,c){var d=this,e=this._insert(b,c,c.parent());a.each(e.items,function(){c.before(this),d._updateFirstLast(this)}),d._updateFirstLast(c)},insertAfter:function(b,c){var d=this,e=this._insert(b,c,c.parent());a.each(e.items,function(){c.after(this),d._updateFirstLast(this)}),d._updateFirstLast(c)},_insert:function(b,c,d){var f=a.isPlainObject(b),g,h={firstLevel:d.parent().hasClass("t-menu"),horizontal:d.hasClass("t-menu-horizontal"),expanded:!0,length:d.children().length};d.length||(d=a(z.renderGroup({group:h})).appendTo(c)),f||a.isArray(b)?g=a.map(f?[b]:b,function(b,c){return a(z.renderItem({group:h,item:e(b,{index:c})}))}):(g=a(b),this._updateItemClasses(b));return{items:g,group:d}},remove:function(b){b=a(b);var c=this,d=b.parentsUntil(c.element,".t-item"),e=b.parent("ul");b.remove();if(e&&!e.children(".t-item").length){var f=e.parent(".t-animation-container");f.length?f.remove():e.remove()}d.length&&(d=d.eq(0),c._updateArrow(d),c._updateFirstLast(d))},open:function(b){var c=this;a(b).each(function(){var b=a(this);clearTimeout(b.data(o)),b.data(o,setTimeout(function(){var a=b.find(".t-group:first:hidden"),d;if(a[0]){b.data("zIndex",b.css("z-index")),b.css("z-index",c.nextItemZIndex++),d=a.data(r);var f=b.parent().hasClass("t-menu-horizontal");d||(d=a.kendoPopup({origin:f?"bottom left":"top right",position:"top left",collision:f?"fit":"fit flip",anchor:b,appendTo:b,animation:{open:e(x(b),c.options.animation.open),close:c.options.animation.close}}).data(r)),d.open()}},c.options.hoverDelay))})},close:function(b){var c=this;a(b).each(function(){var b=a(this);clearTimeout(b.data(o)),b.data(o,setTimeout(function(){var a=b.find(".t-group:first:visible"),c;a[0]&&(b.css("z-index",b.data("z-index")),b.removeData("z-index"),c=a.data(r),c.close())},c.options.hoverDelay))})},_toggleDisabled:function(b,c){a(b).each(function(){a(this).toggleClass(s,c).toggleClass(t,!c)})},_toggleHover:function(b){var c=a(b.currentTarget);c.parents("li."+t).length||c.toggleClass("t-state-hover",b.type==l)},_updateClasses:function(){var a=this;a.element.addClass("t-widget t-reset t-header t-menu").addClass("t-menu-"+a.options.orientation);var b=a.element.find("ul").addClass("t-group").end().find("li").addClass("t-item");b.each(function(){a._updateItemClasses(this)})},_updateItemClasses:function(b){var c=this;b=a(b),b.children(q).addClass("t-image"),b.children("a").addClass("t-link").children(q).addClass("t-image"),b.filter(":not([disabled])").addClass(s),b.filter("li[disabled]").addClass(t).removeAttr("disabled"),b.children("a:focus").parent().addClass("t-state-active"),b.children(".t-link").length||b.contents().filter(function(){return!(this.nodeName.toLowerCase()in{ul:{},a:{},div:{}})&&(this.nodeType!=3||!!a.trim(this.nodeValue))}).wrapAll("<span class='t-link'/>"),c._updateArrow(b),c._updateFirstLast(b)},_updateArrow:function(b){b=a(b),b.find(".t-icon").remove(),b.filter(":has(.t-group)").children(".t-link:not(:has([class*=t-arrow]))").each(function(){var b=a(this),c=b.parent().parent();b.append("<span class='t-icon "+(c.hasClass("t-menu-horizontal")?"t-arrow-down":"t-arrow-next")+"'></span>")})},_updateFirstLast:function(b){b=a(b),b.filter(".t-first:not(:first-child)").removeClass("t-first"),b.filter(".t-last:not(:last-child)").removeClass("t-last"),b.filter(":first-child").addClass("t-first"),b.filter(":last-child").addClass("t-last")},_mouseenter:function(b){var c=this,d=a(b.currentTarget),e=d.children(".t-animation-container").length||d.children(".t-group").length;(!c.options.openOnClick||c.clicked)&&!y(b.currentTarget,b.relatedTarget)&&e&&c.trigger(i,{item:d[0]})===!1&&c.open(d),c.options.openOnClick&&c.clicked&&(c.trigger(j,{item:d[0]}),d.siblings().each(a.proxy(function(a,b){c.close(b)},c)))},_mouseleave:function(b){var c=this,d=a(b.currentTarget),e=d.children(".t-animation-container").length||d.children(".t-group").length;!c.options.openOnClick&&!y(b.currentTarget,b.relatedTarget)&&e&&c.trigger(j,{item:d[0]})===!1&&c.close(d)},_click:function(b){var c=this;b.stopPropagation();var d=a(b.currentTarget);if(d.hasClass(t))b.preventDefault();else{c.trigger(k,{item:d[0]});if(!d.parent().hasClass("t-menu")||!c.options.openOnClick)return;b.preventDefault(),c.clicked=!0,c.trigger(i,{item:d[0]}),c.open(d)}},_documentClick:function(a){var b=this;y(b.element[0],a.target)||b.clicked&&(b.clicked=!1,b.close(b.element.find(".t-item>.t-animation-container:visible").parent()))}});e(z,{renderItem:function(a){a=e({menu:{},group:{}},a);var b=z.templates,c=b.empty,d=a.item,f=a.menu;return b.item(e(a,{image:d.imageUrl?b.image:c,sprite:d.spriteCssClass?b.sprite:c,itemWrapper:b.itemWrapper,arrow:d.items?b.arrow:c,subGroup:z.renderGroup},z.rendering))},renderGroup:function(a){return z.templates.group(e({renderItems:function(a){var b="",c=0,d=a.items,f=d?d.length:0,g=e({length:f},a.group);for(;c<f;c++)b+=z.renderItem(e(a,{group:g,item:e({index:c},d[c])}));return b}},a,z.rendering))}}),z.rendering={wrapperCssClass:function(a,b){var c="t-item",d=b.index;b.enabled===!1?c+=" t-state-disabled":c+=" t-state-default",a.firstLevel&&d==0&&(c+=" t-first"),d==a.length-1&&(c+=" t-last");return c},textClass:function(a){return"t-link"},textAttributes:function(a){return a.url?" href='"+a.url+"'":""},arrowClass:function(a,b){var c="t-icon";b.horizontal?c+=" t-arrow-down":c+=" t-arrow-right";return c},text:function(a){return a.encoded===!1?a.text:c.htmlEncode(a.text)},tag:function(a){return a.url?"a":"span"},groupAttributes:function(a){return a.expanded!==!0?" style='display:none'":""},groupCssClass:function(a){return"t-group"}},z.templates={group:g("<ul class='<#= groupCssClass(group) #>'<#= groupAttributes(group) #>><#= renderItems(data); #></ul>"),itemWrapper:g("<<#= tag(item) #> class='<#= textClass(item) #>'<#= textAttributes(item) #>><#= image(item) #><#= sprite(item) #><#= text(item) #><#= arrow(data) #></<#= tag(item) #>>"),item:g("<li class='<#= wrapperCssClass(group, item) #>'><#= itemWrapper(data) #><# if (item.items) { #><#= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) #><# } #></li>"),image:g("<img class='t-image' alt='' src='<#= imageUrl #>' />"),arrow:g("<span class='<#= arrowClass(item, group) #>'></span>"),sprite:g("<span class='t-sprite <#= spriteCssClass #>'></span>"),empty:g("")},c.ui.plugin("Menu",z,h)})(jQuery,window)