(function(a,b){function o(a){var b=a.value.length;j(a,b,b)}function n(a,b,c,d){var e=b.split(d);e.splice(l(a,b,d),1,c),e[e.length-1]!==""&&e.push("");return e.join(d)}function m(a,b,c){return b.split(c)[l(a,b,c)]}function l(a,b,c){return b.substring(0,a).split(c).length-1}var c=window.kendo,d=c.ui,e=c.data.DataSource,f=d.List,g="change",h="t-state-selected",i=f.caret,j=f.selectText,k=a.proxy,p=f.extend({init:function(b,c){var d=this;c=a.isArray(c)?{dataSource:c}:c,f.fn.init.call(d,b,c),d.wrapper=d._focused=d.element,d._accessors(),d.dataSource=e.create(d.options.dataSource||{}).bind(g,k(d.refresh,d)),d.bind([g],d.options),d.element.attr("autocomplete","off").addClass("t-widget t-input t-autocomplete").bind({keydown:k(d._keydown,d),paste:k(d._search,d),focus:function(){d.previous=d.value()},blur:function(){d._bluring=setTimeout(function(){d._blur()},100)}}),d._popup()},options:{suggest:!1,minLength:1,delay:200,height:200,filter:"startswith"},close:function(){var a=this;a._current=null,a.popup.close()},refresh:function(){var b=this,d=b.ul[0],e=b.dataSource.view(),f=e.length;d.innerHTML=c.render(b.template,e),b._height(f),f&&b.options.highlightFirst&&b.current(a(d.firstChild)),b.popup[f?"open":"close"]()},select:function(b){var c=this,d=c.options.separator,e=c.dataSource.view(),f,g;if(b&&!b.hasClass(h)){g=a.inArray(b[0],c.ul[0].childNodes);if(g===-1)return;e=c.dataSource.view()[g],f=c._text(e),d&&(f=n(i(c.element[0]),c.value(),f,d)),c.value(f),c.current(b.addClass(h))}},search:function(a){var b=this,a=a||b.value(),c=b.options,d=c.separator,e,f,g;b._current=null,clearTimeout(b._typing),d&&(a=m(i(b.element[0]),a,d)),e=a.length,e?e>=b.options.minLength&&b.dataSource.filter({field:c.dataTextField,operator:c.filter,value:a}):b.popup.close()},suggest:function(a){var b=this,c=b.element[0],d=b.options.separator,e=b.value(),f,g,h=i(c);typeof a!="string"&&(a=a?a.text():""),h<=0&&(h=e.toLowerCase().indexOf(a.toLowerCase())+1),a||(a=e.substring(0,h),d&&(a=a.split(d).pop())),d&&(a=n(h,e,a,d)),a!==e&&(b.value(a),f=a.length,d&&(f=h+a.substring(h).indexOf(d)),j(c,h,f))},value:function(a){var c=this,d=c.element[0];if(a!==b)d.value=a;else return d.value},_accept:function(a){var b=this;b._focus(a),o(b.element[0])},_move:function(a){var b=this;a=a[0]?a:null,b.current(a),b.options.suggest&&b.suggest(a)},_keydown:function(a){var b=this,d=a.keyCode,e=c.keys;visible=b.popup.visible(),d===e.DOWN?(visible&&b._move(b._current?b._current.next():b.ul.children().first()),a.preventDefault()):d===e.UP?(visible&&b._move(b._current?b._current.prev():b.ul.children().last()),a.preventDefault()):d===e.ENTER||d===e.TAB?b._accept(b._current):d===e.ESC?b.close():b._search()},_search:function(){var a=this;clearTimeout(a._typing),a._typing=setTimeout(function(){a.previous!==a.value()&&a.search()},a.options.delay)}});d.plugin("AutoComplete",p)})(jQuery)