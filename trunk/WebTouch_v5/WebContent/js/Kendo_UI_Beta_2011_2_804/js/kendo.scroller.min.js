(function(a,b,c){function l(a,b){var c=document.createEvent("TouchEvent");c.initTouchEvent(a,b.bubbles||!1,b.cancelable||!0,b.view||document.defaultView.window,b.detail||1,b.changedTouches[0].screenX,b.changedTouches[0].screenY,b.changedTouches[0].clientX,b.changedTouches[0].clientY,!1,!1,!1,!1,b.touches,b.targetTouches,b.changedTouches,b.scale,b.rotation),b.target.dispatchEvent(c)}function k(a,b){var c=document.createEvent("MouseEvents");c.initMouseEvent(a,b.bubbles||!1,b.cancelable||!0,b.view||document.defaultView.window,b.detail||1,b.screenX||b.changedTouches[0].screenX,b.screenY||b.changedTouches[0].screenY,b.clientX||b.changedTouches[0].clientX,b.clientY||b.changedTouches[0].clientY,!1,!1,!1,!1,b.button||0,b.relatedTarget||b.target),b.target.dispatchEvent(c)}var d=b.kendo,e=d.ui,f=a.extend,g=e.Component,h=["showArrow"],i=d.touchLocation,j=g.extend({init:function(c,e){var i=this;c=a(c),g.fn.init.call(i,c,e),e=i.options,i.bind(h,i.options),i.xScrollbar=a('<div class="touch-scrollbar horizontal-scrollbar" />'),i.yScrollbar=i.xScrollbar.clone().removeClass("horizontal-scrollbar").addClass("vertical-scrollbar"),i._scrollbars=a().add(i.xScrollbar).add(i.yScrollbar),i._scrollArrows={};var j=i._scrollArrows.left=a('<a class="scroll-arrow left-scroll-arrow" href="#" />');f(i._scrollArrows,{right:j.clone().removeClass("left-scroll-arrow").addClass("right-scroll-arrow"),top:j.clone().removeClass("left-scroll-arrow").addClass("top-scroll-arrow"),bottom:j.clone().removeClass("left-scroll-arrow").addClass("bottom-scroll-arrow")}),i._horizontalArrows=a().add(i._scrollArrows.left).add(i._scrollArrows.right),i._verticalArrows=a().add(i._scrollArrows.top).add(i._scrollArrows.bottom),i._allArrows=a().add(i._horizontalArrows).add(i._verticalArrows),i._allArrows.click(a.proxy(i._scrollClick,i)),f(i,{webkit3d:"WebKitCSSMatrix"in b&&"m11"in new WebKitCSSMatrix,_waitProxy:a.proxy(i._wait,i),_startProxy:a.proxy(i._start,i),_stopProxy:a.proxy(i._stop,i),_dragProxy:a.proxy(i._drag,i),_gestureStartProxy:a.proxy(i._onGestureStart,i),_gestureEndProxy:a.proxy(i._onGestureEnd,i),_stepScrollProxy:a.proxy(i._stepScrollAnimation,i),_stepKinetikProxy:a.proxy(i._stepKinetikAnimation,i),_transformProperty:d.support.transitions.css+"transform",_transformOrigin:d.support.transitions.css+"transform-origin",_translate3DPrefix:"translate"+(i.webkit3d?"3d(":"("),_translate3DSuffix:i.webkit3d?", 0)":")"}),i._create()},options:{acceleration:10,velocity:.5,pagingVelocity:5,friction:.98,bounceAcceleration:.1,bounceDeceleration:.1,bounceLimit:0,bounceStop:100,framerate:30,zoomFactor:1,scrollbarOpacity:.7,scrollArrowsOpacity:.84},_create:function(){var b=this,c='<div class="scroll-container"></div>',e=b.element.children();b.element.css("overflow","hidden"),e.length?e.wrapAll(c):b.element.append(c),b.scrollElement=b.element.children(),b._scrollbars.appendTo(b.element),b._horizontalArrows.appendTo(b.element),d.support.touch?(b._moveEvent="touchmove",b._startEvent="touchstart",b._endEvent="touchend",b.element.bind("gesturestart",b._gestureStartProxy).bind("gestureend",b._gestureEndProxy).bind(b._startEvent,b._waitProxy),a.browser.mozilla&&b.element.bind("mousedown",!1)):(b._moveEvent="mousemove",b._startEvent="mousedown",b._endEvent="mouseup",b.element.bind("mouseenter",function(){b._showScrollArrows()}),b.element.bind("mouseleave",function(){b._hideScrollArrows()})),b._storeLastLocation=d.throttle(20,function(a){var c=b.lastLocation.x-a.x,d=b.lastLocation.y-a.y,e={x:c/Math.abs(c)||0,y:d/Math.abs(d)||0},f=b.direction;f?(e.x&&f.x!=e.x&&(b.direction.x=e.x,b.directionChange=+(new Date),b.lastLocation=a),e.y&&f.y!=e.y&&(b.direction.y=e.y,b.directionChange=+(new Date),b.lastLocation=a)):(b.direction=e,b.directionChange=+(new Date),b.lastLocation=a)}),b._applyCSS=function(a){var c={x:0,y:0},d=0,e=0,f={};if(b.hasHorizontalScroll){c.x=-b._limitValue(b.start.x-a.x,b.minBounceStop.x,b.maxBounceStop.x),e=b._getReverseDelta(-c.x,b.minBounceLimit.x,b.maxBounceLimit.x);var g=Math.max(~~(b.boxWidth*b.xRatio-Math.abs(e)),20);d=b._limitValue(-c.x*b.xRatio+e,0,b.boxWidth-g),f[b._transformProperty]=b._translate3DPrefix+d+"px, 0"+b._translate3DSuffix,f.width=g+"px",b.xScrollbar.css(f)}if(b.hasVerticalScroll){c.y=-b._limitValue(b.start.y-a.y,b.minBounceStop.y,b.maxBounceStop.y),e=b._getReverseDelta(-c.y,b.minBounceLimit.y,b.maxBounceLimit.y);var h=Math.max(~~(b.boxHeight*b.yRatio-Math.abs(e)),20);d=b._limitValue(-c.y*b.yRatio+e,0,b.boxHeight-h),f={},f[b._transformProperty]=b._translate3DPrefix+"0, "+d+"px"+b._translate3DSuffix,f.height=h+"px",b.yScrollbar.css(f)}b.scrollElement.stop(!0,!0).css(b._transformProperty,b._translate3DPrefix+c.x/b.options.zoomFactor+"px,"+c.y/b.options.zoomFactor+"px"+b._translate3DSuffix)}},_getReverseDelta:function(a,b,c){var d=this,e=d.options.bounceStop;return d._limitValue((a>c?a-c:0)||(a<b?a:0),-e,e)},_limitValue:function(a,b,c){return Math.max(b,Math.min(c,a))},_getScrollOffsets:function(){var a=this,b=a.scrollElement.css(a._transformProperty).match(/(translate[3d]*\(|matrix\(([\s\w\d]*,){4,4})\s*(-?[\d\.]+)?[\w\s]*,?\s*(-?[\d\.]+)[\w\s]*.*?\)/i)||[0,0,0,0,0];return d.support.transitions?{x:+b[3],y:+b[4]}:{x:parseInt(a.scrollElement.css("marginLeft"),10)||0,y:parseInt(a.scrollElement.css("marginTop"),10)||0}},_onGestureStart:function(){this._dragCanceled=!0},_onGestureEnd:function(){this._dragCanceled=!1},_scrollClick:function(b){b.preventDefault();var c=this,d=0,e=c._getScrollOffsets();a(b.target).hasClass("left-scroll-arrow")&&(d=Math.min(0,e.x+c.element.innerWidth())),a(b.target).hasClass("right-scroll-arrow")&&(d=Math.max(-c.scrollElement.innerWidth()+c.element.innerWidth(),e.x-c.element.innerWidth())),c.scrollElement.kendoStop().kendoAnimate({effects:{slide:{properties:{translateX:d+"px"},direction:"left"}},duration:500})},_animateArrows:function(b,c){var d=this;b.each(function(b){var e=a(this),g={effects:{fadeIn:{properties:{opacity:d.options.scrollArrowsOpacity}}},duration:"fast",show:!0,complete:function(){d.trigger(c+"Arrow",e)}},h={};c=="hide"&&(h={effects:"fadeOut"}),e.kendoStop(!0).kendoAnimate(f(g,h))})},_showScrollArrows:function(a){var b=this;b._initializeBoxModel(),b._allArrows.hide(),b.hasVerticalScroll&&b._animateArrows(b._verticalArrows,"show"),b.hasHorizontalScroll&&b._animateArrows(b._horizontalArrows,"show")},_hideScrollArrows:function(a){var b=this;b.hasVerticalScroll&&b._animateArrows(b._verticalArrows,"hide"),b.hasHorizontalScroll&&b._animateArrows(b._horizontalArrows,"hide")},_wait:function(b){b.preventDefault();var c=this;c._dragged=!1,clearTimeout(c.timeoutId),c._originalEvent=b.originalEvent;var d=i(b),e=c._getScrollOffsets();c.start={idx:d.idx,x:d.x-e.x,y:d.y-e.y},c.lastLocation=d,c.direction={x:1,y:1},c.directionChange=+(new Date),a(document).unbind(c._moveEvent,c._startProxy).bind(c._moveEvent,c._startProxy),a.browser.mozilla?c.element.unbind(c._endEvent,c._stopProxy).bind(c._endEvent,c._stopProxy):(document.removeEventListener(c._endEvent,c._stopProxy,!0),document.addEventListener(c._endEvent,c._stopProxy,!0))},_initializeBoxModel:function(){var a=this;f(a,{boxWidth:a.element.innerWidth(),boxHeight:a.element.innerHeight(),scrollWidth:a.scrollElement.innerWidth(),scrollHeight:a.scrollElement.innerHeight()});var b={x:-a.boxWidth*a.options.bounceLimit,y:-a.boxHeight*a.options.bounceLimit},c={x:-a.options.bounceStop,y:-a.options.bounceStop};f(a,{hasHorizontalScroll:a.scrollWidth>a.boxWidth,hasVerticalScroll:a.scrollHeight>a.boxHeight,xRatio:a.boxWidth/a.scrollWidth,yRatio:a.boxHeight/a.scrollHeight,minBounceLimit:b,maxBounceLimit:{x:a.scrollWidth-a.boxWidth-b.x,y:a.scrollHeight-a.boxHeight-b.y},minBounceStop:c,maxBounceStop:{x:a.scrollWidth-a.boxWidth-c.x,y:a.scrollHeight-a.boxHeight-c.y}})},_start:function(b){var c=this;if(!c._dragCanceled){var e=10*d.support.devicePixelRatio,f=i(b);if(f.idx!=c.start.idx)return;if(Math.abs(c.lastLocation.x-f.x)>e||Math.abs(c.lastLocation.y-f.y)>e)b.preventDefault(),b.stopPropagation(),c._dragged=!0,c._initializeBoxModel(),c.hasHorizontalScroll&&c.xScrollbar.css({width:~~(c.boxWidth*c.xRatio),opacity:c.options.scrollbarOpacity,visibility:"visible"}),c.hasVerticalScroll&&c.yScrollbar.css({height:~~(c.boxHeight*c.yRatio),opacity:c.options.scrollbarOpacity,visibility:"visible"}),a(document).unbind(c._moveEvent,c._startProxy).unbind(c._moveEvent,c._dragProxy).bind(c._moveEvent,c._dragProxy)}},_drag:function(a){var b=this;if(!b._dragCanceled){a.preventDefault(),a.stopPropagation();var c=i(a);if(c.idx!=b.start.idx)return;b._applyCSS(c),b._storeLastLocation(c)}},_click:function(a){var b=this;a.stopPropagation(),a.preventDefault(),b.target.unbind("click",b.original._click)},_stop:function(b){var c=this;if(!c._dragCanceled){b.preventDefault(),b.stopPropagation(),a.browser.mozilla?c.element.unbind(c._endEvent,c._stopProxy):document.removeEventListener(c._endEvent,c._stopProxy,!0),a(document).unbind(c._moveEvent,c._startProxy).unbind(c._moveEvent,c._dragProxy);var e=c._originalEvent,f=a(e.target),g=null;c._dragged?(c._dragged=!1,c._initKinetikAnimation(b)):(g=a.proxy(c._click,{original:c,target:f}),d.support.touch&&e.touches.length==1&&(f.unbind("click",g),f.trigger("touchend"),k("click",e),f.bind("click",g)))}},_hideScrollHints:function(){var a=this;a.hasHorizontalScroll&&a.xScrollbar.css("opacity",0),a.hasVerticalScroll&&a.yScrollbar.css("opacity",0)},_initKinetikAnimation:function(a){var b=this;b.bounceLocation=i(a);var c=(+(new Date)-b.directionChange)/b.options.acceleration,d=b.bounceLocation.x-b.lastLocation.x,e=b.bounceLocation.y-b.lastLocation.y;b._startKinetikAnimation(d,e,c)},_startKinetikAnimation:function(a,b,c){var d=this;d.decelerationVelocity={x:a/c,y:b/c},d.framerate=1e3/d.options.framerate,d.friction={x:d.options.friction,y:d.options.friction},d.winding=!1;if(Math.abs(d.decelerationVelocity.x)>d.options.velocity||Math.abs(d.decelerationVelocity.y)>d.options.velocity)d.winding=!0,d.lastCall=+(new Date),clearTimeout(d.timeoutId),d.timeoutId=setTimeout(d._stepKinetikProxy,d.framerate)},_singleStep:function(){var a=this,b=a._getScrollOffsets();a._decelerate("x",b.x,a.minBounceLimit.x,a.maxBounceLimit.x),a._decelerate("y",b.y,a.minBounceLimit.y,a.maxBounceLimit.y);if(Math.abs(a.decelerationVelocity.x)<=a.options.velocity&&Math.abs(a.decelerationVelocity.y)<=a.options.velocity){a.winding=!1,a._endKinetikAnimation();return!0}return!1},_scrollIntoView:function(a){},_scrollTo:function(a,b,c){var d=this;d.start||d._initializeBoxModel(),d.framerate=1e3/d.options.framerate,d.start={x:0,y:0},d.source=d.bounceLocation=d.bounceLocation||d._getScrollOffsets(),d.lastCall=d.source.time=+(new Date),c?(clearTimeout(d.timeoutId),d.destination={x:-a,y:-b,duration:c},d.timeoutId=setTimeout(d._stepScrollProxy,d.framerate)):d._applyCSS({x:-a,y:-b})},_stepScrollAnimation:function(){var a=this,b=+(new Date),c=b-a.source.time,d=a.destination.duration/c,e=Math.ceil((b-a.lastCall)/a.framerate-1);while(e-->=0)a.bounceLocation={x:-(-a.source.x-a.destination.x)/d,y:-(-a.source.y-a.destination.y)/d},a._applyCSS(a.bounceLocation);c<a.destination.duration&&(a.timeoutId=setTimeout(a._stepScrollProxy,a.framerate),a.lastCall=b)},_scrollBy:function(a,b,c){var d=this;d.bounceLocation||d._initializeBoxModel(),d.start={x:0,y:0},d.bounceLocation=d._getScrollOffsets(),c?d._startKinetikAnimation(d.bounceLocation.x-a,d.bounceLocation.y-b,c/d.options.acceleration):d._applyCSS({x:d.bounceLocation.x-a,y:d.bounceLocation.y-b})},_decelerate:function(a,b,c,d){var e=this,f=0,g=e.options.bounceStop,h=e.bounceLocation[a],i=e.decelerationVelocity[a],j=e.friction[a];h+=i,i*=j,-b<c?f=c+b:-b>d&&(f=d+b);if(f){var k=0;j-=e._limitValue((g-Math.abs(f))/g,.04,.9),k=f*e.options.bounceDeceleration,i-=k}e.bounceLocation[a]=h,e.decelerationVelocity[a]=i,e.friction[a]=e._limitValue(j,0,.99)},_stepKinetikAnimation:function(){var a=this;if(!!a.winding){var b=+(new Date),c=b-a.lastCall,d=Math.round(c/a.framerate-1);while(d-->0)if(a._singleStep())return;if(a._singleStep())return;a._applyCSS(a.bounceLocation),a.timeoutId=setTimeout(a._stepKinetikProxy,a.framerate),a.lastCall=b}},_endKinetikAnimation:function(){var a=this;a.winding=!1,clearTimeout(a.timeoutId),a._hideScrollHints()}});d.ui.plugin("Scroller",j,g)})(jQuery,window)