(function(a,b){var c=b.kendo,d=a.proxy,e="dir",f="asc",g="single",h="field",i="desc",j=".t-link",k=c.ui.Component,l=k.extend({init:function(a,b){var c=this,e;k.fn.init.call(c,a,b),c.dataSource=c.options.dataSource.bind("change",d(c.refresh,c)),e=c.element.find(j),e[0]||(e=c.element.wrapInner('<a class="t-link" href="#"/>').find(j)),c.link=e,c.element.click(d(c._click,c))},options:{mode:g,allowUnsort:!0},refresh:function(){var b=this,c=b.dataSource.sort()||[],d,g,j,k,l=b.element,m=l.data(h);l.removeData(e);for(d=0,g=c.length;d<g;d++)j=c[d],m==j.field&&l.data(e,j.dir);k=l.data(e),l.find(".t-arrow-up,.t-arrow-down").remove(),k===f?a('<span class="t-icon t-arrow-up" />').appendTo(b.link):k===i&&a('<span class="t-icon t-arrow-down" />').appendTo(b.link)},_click:function(a){var b=this,c=b.element,d=c.data(h),j=c.data(e),k=b.options,l=b.dataSource.sort()||[],m,n;j===f?j=i:j===i&&k.allowUnsort?j=undefined:j=f;if(k.mode===g)l=[{field:d,dir:j}];else if(k.mode==="multiple"){for(m=0,n=l.length;m<n;m++)if(l[m].field===d){l.splice(m,1);break}l.push({field:d,dir:j})}a.preventDefault(),b.dataSource.sort(l)}});c.ui.plugin("Sortable",l)})(jQuery,window)