(function(a,b,c){function C(a,b,c,d){b?a.delegate(b,c,d):a.bind(c,d)}function B(b,c){try{return a.contains(b,c)||b==c}catch(d){return!1}}function A(b,c){var d={element:[null]};a.each(c,function(){var a=this,c=a.element[0];if(B(c,b)){d=a;return!1}});return d}var d=b.kendo,e=b.document,f=d.ui.Component,g=a.proxy,h=a.extend,i=d.support.touch,j={},k={},l={element:[null]},m=".kendo-dnd",n="mouseenter",o=i?"touchend":"mouseup",p=i?"touchstart":"mousedown",q=i?"touchmove":"mousemove",r="keydown",s="mouseleave",t="selectstart",u="dragstart",v="dragend",w="drag",x="dragenter",y="dragleave",z="drop",D=f.extend({init:function(a,b){var c=this;f.fn.init.call(c,a,b),c.element.bind(n,g(c._over,c)).bind(o,g(c._drop,c)).bind(s,g(c._out,c)),c.bind([x,y,z],c.options);var d=c.options.group;d in k?k[d].push(c):k[d]=[c]},options:{group:"default"},_trigger:function(a,b){var c=this,d=j[c.options.group];if(d)return c.trigger(a,h({},b,{draggable:d}))},_over:function(a){this._trigger(x,a)},_out:function(a){this._trigger(y,a)},_drop:function(a){var b=this,c=j[b.options.group];c&&(c.dropped=!b._trigger(z,a))}});d.ui.plugin("DropTarget",D);var E=f.extend({init:function(a,b){var c=this;f.fn.init.call(c,a,b),C(c.element,c.options.filter,p+m,g(c._wait,c)),c.bind([u,w,v],c.options),C(c.element,c.options.filter,u+m,!1)},options:{distance:5,group:"default",cursorOffset:{left:10,top:10},dropped:!1},_startDrag:function(b){var c=this,f=c.options.filter;c._offset=d.touchLocation(b),f?c.currentTarget=a(b.target).is(f)?a(b.target):a(b.target).closest(f):c.currentTarget=a(b.currentTarget),a(e).bind(q+m,g(c._start,c)).bind(o+m,g(c._destroy,c))},_wait:function(a){var b=this;b._startDrag(a),i||a.preventDefault()},_start:function(b){var c=this,f=d.touchLocation(b),h=f.x,k=f.y,l=c._offset.x-h,n=c._offset.y-k,p=Math.sqrt(l*l+n*n),s=c.options,v=s.cursorOffset,w=s.hint;p>=s.distance&&(i&&b.preventDefault(),w&&(c.hint=a.isFunction(w)?a(w(c.currentTarget)):w,c.hint.css({position:"absolute",zIndex:10010,left:h+v.left,top:k+v.top}).appendTo(e.body)),j[s.group]=c,a(e).unbind(m).bind(o+m+" "+r+m,g(c._stop,c)).bind(q+m,g(c._drag,c)).bind(t+m,!1),c.dropped=!1,c._trigger(u,b)&&c._destroy(b))},_drag:function(a){var b=this,c=b.options.cursorOffset,e=d.touchLocation(a);if(i&&d.size(k)){var f=b.options,g=d.eventTarget(a);if(g){var h=A(g,k[f.group]),j=h.element[0],m=l.element[0],n=m!=j;n&&(m!=null&&l._trigger(y,a),B(j,g)&&h._trigger(x,a),l=h)}}b._trigger(w,a),b.hint&&b.hint.css({left:e.x+c.left,top:e.y+c.top})},_stop:function(a){var b=this,c=g(b._destroy,b),e=b.currentTarget.offset();if(a.type==o||a.keyCode==27){if(i&&d.size(k)){var f=b.options,h=d.eventTarget(a);if(h){var j=A(h,k[f.group]);j.element[0]&&(l={element:[null]},j._drop(a))}}b._trigger(v,a),b.hint&&!b.dropped?b.hint.animate(e,"fast",c):c()}},_trigger:function(a,b){var c=this,e=d.touchLocation(b);return c.trigger(a,h({},b,{currentTarget:c.currentTarget,pageX:e.x,pageY:e.y}))},_destroy:function(b){var c=this;c.hint&&c.hint.remove(),delete j[c.options.group],a(e).unbind(m)}});d.ui.plugin("Draggable",E)})(jQuery,window)