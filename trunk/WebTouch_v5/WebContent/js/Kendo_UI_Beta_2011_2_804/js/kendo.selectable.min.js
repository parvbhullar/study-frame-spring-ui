(function(a,b){var c=b.kendo,d=c.keys,e=c.support.touch,f=c.ui.Component,g=a.proxy,h=e?"touchend":"mouseup",i=e?"touchstart":"mousedown",j=e?"touchmove":"mousemove",k="t-state-selected",l="t-state-selecting",m="t-selectable",n="selectstart",o="t-state-unselecting",p=f.extend({init:function(b,c){var d=this;f.fn.init.call(d,b,c),d.options=a.extend({},d.options,c),d._marquee=a("<div class='t-marquee'></div>"),d._lastActive=null,d._moveDelegate=g(d._move,d),d._upDelegate=g(d._up,d),d.element.addClass(m),d.element.delegate("."+m+" "+d.options.filter,i,g(d._down,d)),d.bind(["change"],d.options)},options:{filter:">*",multiple:!1},_collide:function(a,b){var c=a.offset(),d={left:c.left,top:c.top,right:c.left+a.outerWidth(),bottom:c.top+a.outerHeight()};return!(d.left>b.right||d.right<b.left||d.top>b.bottom||d.bottom<b.top)},_position:function(a){var b=this._originalPosition,c=b.x,d=b.y,e=a.pageX,f=a.pageY;if(c>e){var g=e;e=c,c=g}if(d>f){var g=f;f=d,d=g}return{top:d,right:e,left:c,bottom:f}},_down:function(b){var d=this,e=b.ctrlKey,f=b.shiftKey,g=!d.options.multiple;d._downTarget=a(b.currentTarget),d._shiftPressed=f,a(document).unbind(h,d._upDelegate).bind(h,d._upDelegate),d._originalPosition={x:b.pageX,y:b.pageY},g||a(document).unbind(j,d._moveDelegate).bind(j,d._moveDelegate),g||(a("body").append(d._marquee),d._marquee.css({left:b.clientX+1,top:b.clientY+1,width:0,height:0}));var i=d._downTarget.hasClass(k);(g||!e&&!f)&&d.element.find(d.options.filter+"."+k).removeClass(k),e&&(d._lastActive=d._downTarget),i&&(e||f)?(d._downTarget.addClass(k),f||d._downTarget.addClass(o)):(!c.support.touch||!g)&&d._downTarget.addClass(l)},_move:function(b){var c=this,d=c._position(b),e=b.ctrlKey;c._marquee.css({left:d.left,top:d.top,width:d.right-d.left,height:d.bottom-d.top}),a(document).unbind(n,!1).bind(n,!1),c.element.find(c.options.filter).each(function(){var b=a(this),f=c._collide(b,d);f?b.hasClass(k)?c._downTarget[0]!==b[0]&&e&&b.removeClass(k).addClass(o):!b.hasClass(l)&&!b.hasClass(o)&&b.addClass(l):b.hasClass(l)?b.removeClass(l):e&&b.hasClass(o)&&b.removeClass(o).addClass(k)})},_up:function(b){var d=this,e=!d.options.multiple,f=d.options;a(document).unbind(j,d._moveDelegate).unbind(h,d._upDelegate),f.multiple&&d._marquee.remove(),c.support.touch&&e&&d._downTarget.addClass(l),f.multiple&&d._shiftPressed===!0?d.selectRange(d._firstSelectee(),d._downTarget):(d.element.find(f.filter+"."+o).removeClass(o).removeClass(k),d.value(d.element.find(f.filter+"."+l))),d._shiftPressed||(d._lastActive=d._downTarget),d._downTarget=null,d._shiftPressed=!1},value:function(a){var b=this,c=g(b._selectElement,b);if(a)a.each(function(){c(this)}),b.trigger("change",{});else return b.element.find(b.options.filter+"."+k)},_firstSelectee:function(){var a=this;if(a._lastActive!==null)return a._lastActive;var b=a.value();return b.length>0?b[0]:a.element.find(a.options.filter)},_selectElement:function(b){var c=a(b),d=this.trigger("select",{element:b});c.removeClass(l),d||c.addClass(k)},clear:function(){var a=this;a.element.find(a.options.filter+"."+k).removeClass(k)},selectRange:function(b,c){var d=this,e=!1,f=g(d._selectElement,d),h;b=a(b)[0],c=a(c)[0],d.element.find(d.options.filter).each(function(){h=a(this);if(e)f(this),e=this!==c;else if(this===b)e=b!==c,f(this);else if(this===c){var d=b;b=c,c=d,e=!0,f(this)}else h.removeClass(k)}),d.trigger("change",{})}});c.ui.plugin("Selectable",p)})(jQuery,window)