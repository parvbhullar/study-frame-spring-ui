<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>SimpleTree Drag&Drop</title>
<link href="tree.css"  type="text/css" rel="stylesheet"/>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.simple.tree.self.js"></script>
<script type="text/javascript">
var simpleTreeCollection;
$(document).ready(function(){
	simpleTreeCollection = $('.simpleTree').simpleTree({
		url:'tree.json',
		dataType:'json',
		check:true,
		cascadeType:false,//默认是true 即节点被选中时 其祖先节点和后代节点都被选中
		animate:true,
		afterClick:function(node){
			alert(node.id+"---"+node.text);
			if(node.attributes){
				alert(node.attributes.p1+"--"+node.attributes.p2);
			}
		},
		afterDblClick:function(node){
			//alert("text-"+$('span:first',node).text());
		},
		afterMove:function(destination, source, pos){
			//alert("destination-"+destination.attr('id')+" source-"+source.attr('id')+" pos-"+pos);
		},
		afterAjax:function()
		{
			//alert('Loaded');
		}
	});
	
	$("#selectCheckId").click(function(){
		
		if($("input:checked",".simpleTree").length == 0) {
			alert("没有选中节点");
		}else{
			var nodeid = [];
			$("input:checked",".simpleTree").each(function(){
				nodeid.push($(this).val());
			});
			alert(nodeid.join(","));
		}
	});
});
</script>
</head>

<body>
<div >
	<ul id="tree" class="simpleTree">
	</ul>
	<input type="button" id="selectCheckId" value="选中的节点编号"/>
</div>


</body>

</html>
