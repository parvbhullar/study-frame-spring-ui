(function(a,b){var c=b.kendo,d=c.ui,e=a.extend,f=c.template,g=d.Component,h="expand",i="collapse",j="select",k="error",l="contentLoad",m="mouseenter",n="mouseleave",o="click",p=".t-item",q=p+":not(.t-state-disabled) .t-link",r=p+".t-state-disabled .t-link",s=".t-state-active",t=".t-state-selected",u=".t-state-disabled",v=".t-state-highlighted",w="t-state-default",x=":visible",y=":empty",z=!1,A="single",B=g.extend({init:function(b,c){b=a(b);var d=this,e;g.fn.init.call(d,b,c),c=d.options,d.element.is(y)&&d.element.append(a(B.renderGroup({items:c.dataSource,group:{firstLevel:!0,expanded:!0},panelBar:{}})).children()),d._updateClasses(),c.animation===!1&&(c.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}}),b.delegate(q,o,a.proxy(d._click,d)).delegate(q,m+" "+n,d._toggleHover).delegate(r,o,!1),d.bind([h,i,j,k,l],d.options),d.options.contentUrls&&b.find("> .t-item").each(function(b,c){a(c).find(".t-link").data("ContentUrl",d.options.contentUrls[b])}),e=b.find("li"+s+" > .t-content"),e.length>0&&e.is(y)&&d.expand(e.parent())},options:{animation:{open:{effects:"expandVertical",duration:200,show:!0},close:{duration:200,show:!1,hide:!0}},expandMode:"multiple"},expand:function(b,c){var d=this,e={};c=c!==!1,a(b).each(function(f,g){g=a(g);if(!g.hasClass(u)&&g.find("> .t-group, > .t-content").length>0){if(d.options.expandMode==A&&d._collapseAllExpanded(g))return;b.find(v).removeClass(v.substr(1)),g.addClass(v.substr(1)),c||(e=d.options.animation,d.options.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}}),d._toggleItem(g,!1,null),c||(d.options.animation=e)}})},collapse:function(b,c){var d=this,e={};c=c!==!1,a(b).each(function(b,f){f=a(f),!f.hasClass(u)&&f.find("> .t-group, > .t-content").is(x)&&(f.removeClass(v.substr(1)),c||(e=d.options.animation,d.options.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}}),d._toggleItem(f,!0,null),c||(d.options.animation=e))})},toggle:function(b,c){a(b).toggleClass(w,c).toggleClass(u.substr(1),!c)},select:function(b){var c=this;if(arguments.length===0)return c.element.find(".t-item > "+t).parent();a(b).each(function(b,d){d=a(d);var e=d.children(".t-link");d.is(u)||(a(t,c.element).removeClass(t.substr(1)),a(v,c.element).removeClass(v.substr(1)),e.addClass(t.substr(1)),e.parentsUntil(c.element,p).filter(":has(.t-header)").addClass(v.substr(1)))})},enable:function(a,b){b!==!1&&(b=!0),this.toggle(a,b)},disable:function(a){this.toggle(a,!1)},append:function(b,c){var d=this,e=d._insert(b,c,c.find("> .t-group"));a.each(e.items,function(){e.group.append(this),d._updateFirstLast(this)}),d._updateArrow(c),d._updateFirstLast(c.find(".t-first, .t-last")),e.group.height("auto")},insertBefore:function(b,c){var d=this,e=this._insert(b,c,c.parent());a.each(e.items,function(){c.before(this),d._updateFirstLast(this)}),d._updateFirstLast(c),e.group.height("auto")},insertAfter:function(b,c){var d=this,e=this._insert(b,c,c.parent());a.each(e.items,function(){c.after(this),d._updateFirstLast(this)}),d._updateFirstLast(c),e.group.height("auto")},remove:function(b){b=a(b);var c=this,d=b.parentsUntil(c.element,p),e=b.parent("ul");b.remove(),e&&!e.children(p).length&&e.remove(),d.length&&(d=d.eq(0),c._updateArrow(d),c._updateFirstLast(d))},_insert:function(b,c,d){var f=a.isPlainObject(b),g,h={firstLevel:d.hasClass("t-panelbar"),expanded:d.parent().hasClass("t-state-active"),length:d.children().length};d.length||(d=a(B.renderGroup({group:h})).appendTo(c)),f||a.isArray(b)?g=a.map(f?[b]:b,function(b,c){return a(B.renderItem({group:h,item:e(b,{index:c})}))}):(g=a(b),this._updateItemClasses(b));return{items:g,group:d}},_toggleHover:function(b){var c=a(b.currentTarget);c.parents("li"+u).length||c.toggleClass("t-state-hover",b.type==m)},_updateClasses:function(){var a=this;a.element.addClass("t-widget t-reset t-header t-panelbar");var b=a.element.find("ul").addClass("t-group").end().find("li:not("+s+") > ul").css({display:"none"}).end().find("li").addClass("t-item");b.each(function(){a._updateItemClasses(this)}),a._updateArrow(b),a._updateFirstLast(b)},_updateItemClasses:function(b){var c=this;b=a(b),b.children("img").addClass("t-image"),b.children("a").addClass("t-link").children("img").addClass("t-image"),b.filter(":not([disabled]):not([class*=t-state])").addClass("t-state-default"),b.filter("li[disabled]").addClass("t-state-disabled").removeAttr("disabled"),b.filter(":not([class*=t-state])").children("a:focus").parent().addClass(s.substr(1)),b.find(">div").addClass("t-content").css({display:"none"}),b.each(function(){var b=a(this);b.children(".t-link").length||b.contents().filter(function(){return!(this.nodeName.toLowerCase()in{ul:{},a:{},div:{}})&&(this.nodeType!=3||!!a.trim(this.nodeValue))}).wrapAll("<span class='t-link'/>")}),c.element.find(" > li > .t-link").addClass("t-header")},_updateArrow:function(b){b=a(b),b.find(".t-icon").remove(),b.filter(":has(.t-group),:has(.t-content)").children(".t-link:not(:has([class*=t-arrow]))").each(function(){var b=a(this),c=b.parent();b.append("<span class='t-icon "+(c.hasClass(s.substr(1))?"t-arrow-up t-panelbar-collapse":"t-arrow-down t-panelbar-expand")+"'></span>")})},_updateFirstLast:function(b){b=a(b),b.filter(".t-first:not(:first-child)").removeClass("t-first"),b.filter(".t-last:not(:last-child)").removeClass("t-last"),b.filter(":first-child").addClass("t-first"),b.filter(":last-child").addClass("t-last")},_click:function(b){var c=this,d=a(b.currentTarget),e=c.element;if(!d.parents("li"+u).length){if(d.closest(".t-widget")[0]!=e[0])return;var f=d.closest(".t-link"),g=f.closest(p);a(t,e).removeClass(t.substr(1)),a(v,e).removeClass(v.substr(1)),f.addClass(t.substr(1)),f.parentsUntil(c.element,p).filter(":has(.t-header)").addClass(v.substr(1));var k=g.find("> .t-content, > .t-group"),l=f.attr("href"),m=f.data("ContentUrl")||l&&(l.charAt(l.length-1)=="#"||l.indexOf("#"+c.element[0].id+"-")!=-1);if(k.data("animating"))return;c._triggerEvent(j,g)&&b.preventDefault();if(m||k.length)b.preventDefault();else return;if(c.options.expandMode==A&&c._collapseAllExpanded(g))return;if(k.length){var n=k.is(x);c._triggerEvent(n?i:h,g)||c._toggleItem(g,n,b)}}},_toggleItem:function(a,b,c){var d=this,e=a.find("> .t-group");if(e.length)this._toggleGroup(e,b),c&&c.preventDefault();else{var f=a.parent().children().index(a),g=a.find("> .t-content");g.length&&(c&&c.preventDefault(),g.is(y)?d._ajaxRequest(a,g,b):d._toggleGroup(g,b))}},_toggleGroup:function(a,b){var c=this,d="effects"in c.options.animation.close,f=e({},c.options.animation.open);a.is(x)==b&&(b&&a.css("height",a.height()),a.css("height"),a.parent().toggleClass(w,b).toggleClass(s.substr(1),!b).find("> .t-link > .t-icon").toggleClass("t-arrow-up",!b).toggleClass("t-panelbar-collapse",!b).toggleClass("t-arrow-down",b).toggleClass("t-panelbar-expand",b),a.kendoStop(!0,!0).kendoAnimate(e(d&&b?c.options.animation.close:!d&&b?e(f,{show:!1,hide:!0}):c.options.animation.open,{reverse:!d&&b})))},_collapseAllExpanded:function(b){var c=this;if(b.find("> .t-link").hasClass("t-header")){if(b.find("> .t-content, > .t-group").is(x)||b.find("> .t-content, > .t-group").length==0)return!0;a(c.element).children().find("> .t-content, > .t-group").filter(function(){return a(this).is(x)}).each(function(b,d){c._toggleGroup(a(d),!0)})}},_ajaxRequest:function(b,c,d){var e=this,f=b.find(".t-panelbar-collapse, .t-panelbar-expand"),g=b.find(".t-link"),h=setTimeout(function(){f.addClass("t-loading")},100),i={};a.ajax({type:"GET",cache:!1,url:g.data("ContentUrl")||g.attr("href"),dataType:"html",data:i,error:function(a,b){e.trigger(k,{xhr:a,status:b})&&this.complete()},complete:function(){clearTimeout(h),f.removeClass("t-loading")},success:function(a,f){c.html(a),e._toggleGroup(c,d),e.trigger(l,{item:b[0],contentElement:c[0]})}})},_triggerEvent:function(a,b){var c=this;c.trigger(a,{item:b[0]})}});e(B,{renderItem:function(a){a=e({panelBar:{},group:{}},a);var b=B.templates,c=b.empty,d=a.item,f=a.panelBar;return b.item(e(a,{image:d.imageUrl?b.image:c,sprite:d.spriteCssClass?b.sprite:c,itemWrapper:b.itemWrapper,arrow:d.items?b.arrow:c,subGroup:B.renderGroup},B.rendering))},renderGroup:function(a){return B.templates.group(e({renderItems:function(a){var b="",c=0,d=a.items,f=d?d.length:0,g=e({length:f},a.group);for(;c<f;c++)b+=B.renderItem(e(a,{group:g,item:e({index:c},d[c])}));return b}},a,B.rendering))}}),B.rendering={wrapperCssClass:function(a,b){var c="t-item",d=b.index;b.enabled===!1?c+=" t-state-disabled":c+=" t-state-default",d==0&&(c+=" t-first"),d==a.length-1&&(c+=" t-last");return c},textClass:function(a,b){var c="t-link";b.firstLevel&&(c+=" t-header");return c},textAttributes:function(a){return a.url?" href='"+a.url+"'":""},arrowClass:function(a,b){var c="t-icon";b.horizontal?c+=" t-arrow-down":c+=" t-arrow-right";return c},text:function(a){return a.encoded===!1?a.text:c.htmlEncode(a.text)},tag:function(a){return a.url?"a":"span"},groupAttributes:function(a){return a.expanded!==!0?" style='display:none'":""},groupCssClass:function(a){return"t-group"}},B.templates={group:f("<ul class='<#= groupCssClass(group) #>'<#= groupAttributes(group) #>><#= renderItems(data); #></ul>"),itemWrapper:f("<<#= tag(item) #> class='<#= textClass(item, group) #>'<#= textAttributes(item) #>><#= image(item) #><#= sprite(item) #><#= text(item) #><#= arrow(data) #></<#= tag(item) #>>"),item:f("<li class='<#= wrapperCssClass(group, item) #>'><#= itemWrapper(data) #><# if (item.items) { #><#= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) #><# } #></li>"),image:f("<img class='t-image' alt='' src='<#= imageUrl #>' />"),arrow:f("<span class='<#= arrowClass(item, group) #>'></span>"),sprite:f("<span class='t-sprite <#= spriteCssClass #>'></span>"),empty:f("")},c.ui.plugin("PanelBar",B,g)})(jQuery,window)