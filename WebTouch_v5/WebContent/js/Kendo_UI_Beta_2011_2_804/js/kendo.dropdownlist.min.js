(function(a,b){var c=window.kendo,d=c.ui,e=d.Select,f="change",g="select",h="t-state-selected",i="t-state-disabled",j="t-state-hover",k="mouseenter mouseleave",l=".t-dropdown-wrap",m=a.proxy,n=e.extend({init:function(b,c){var d=this;c=a.isArray(c)?{dataSource:c}:c,e.fn.init.call(d,b,c),d._word="",d._wrapper(),d._span(),d._popup(),d._accessors(),d._dataSource(),d.bind([f],d.options),d.element.prop("disabled")&&(d.options.enable=!1),d.enable(d.options.enable),d.options.autoBind?(d.showBusy(),d.dataSource.query()):d.element.is(g)&&d.text(d.element.children(":selected").text())},options:{enable:!0,index:0,autoBind:!0,delay:500,dataTextField:"text",dataValueField:"value",height:200},enable:function(a){var b=this,c=b.wrapper,d=b.element,e="disabled";a===!1?(c.addClass(i).unbind().children(l).unbind(k),d.attr(e,e)):(d.removeAttr(e,e),c.removeClass(i).bind({keydown:m(b._keydown,b),keypress:m(b._keypress,b),focusin:function(){clearTimeout(b._bluring)},click:function(){b.ul[0].firstChild?b.toggle():(b.showBusy(),b.dataSource.read())},focusout:function(a){b._bluring=setTimeout(function(){b._blur()},100)}}).children(l).bind(k,b._toggleHover))},open:function(){var a=this,b=a._current;a.ul[0].firstChild?(a.popup.open(),b&&a._scroll(b[0])):(a.showBusy(),a.options.autoBind=!1,a.dataSource.query())},toggle:function(a){var c=this;a===b&&(a=!c.popup.visible()),c[a?"open":"close"]()},refresh:function(){var a=this,b=a.value(),d=a.options,e=a.dataSource.view(),f=e.length;a.ul[0].innerHTML=c.render(a.template,e),a._height(f),a.element.is(g)&&a._options(e),b?a.value(b):a.select(d.index),a.previous=a.value(),d.autoBind||a.toggle(f),a.hideBusy()},search:function(a){if(a){var c=this;a=a.toLowerCase(),c.select(function(d){var e=c._text(d);if(e!==b)return(e+"").toLowerCase().indexOf(a)===0})}},select:function(c){var d=this,e,f,g,i,j=d._current,k=d.dataSource.view(),l=d.ul[0].childNodes;j&&j.removeClass(h);if(typeof c=="function")for(e=0,f=k.length;e<f;e++)if(c(k[e])){c=e;break}if(typeof c=="number"){if(c<0)return;c=a(l[c])}if(c[0]&&!c.hasClass(h)){e=a.inArray(c[0],l);if(e===-1)return;k=k[e],g=d._text(k),i=d._value(k),d.text(g),d.element[0].value=i!=b?i:g,d.current(c.addClass(h))}},text:function(a){var c=this.span;if(a!==b)c.text(a);else return c.text()},value:function(c){var d=this,e=d.element;if(c===b)return e.val();var f=d.dataSource.view(),g;f[0]&&(g=a.map(f,function(a,e){var f=d._value(a);f===b&&(f=d._text(a));if(f==c)return e}),d.select(g[0]||0),d.previous=e.val())},_toggleHover:function(b){a(b.currentTarget).toggleClass(j,b.type=="mouseenter")},_accept:function(a){this._focus(a)},_keydown:function(a){var b,d=this,e=a.keyCode,f=d._current,g=c.keys;a.altKey?d.toggle(e===g.DOWN):e===g.DOWN?(d._move(f.next()),b=!0):e===g.UP?(d._move(f.prev()),b=!0):e===g.HOME?(d._move(d.ul.children().first()),b=!0):e===g.END?(d._move(d.ul.children().last()),b=!0):e===g.ENTER||e===g.TAB?(d._accept(f),b=!0):e===g.ESC&&d.close(),b&&a.preventDefault()},_keypress:function(a){var b=this;setTimeout(function(){b._word+=String.fromCharCode(a.keyCode||a.charCode),b._search()})},_search:function(){var a=this;clearTimeout(a._typing),a._typing=setTimeout(function(){a._word=""},a.options.delay),a.search(a._word)},_span:function(){var a=this,b=a.wrapper,c=".t-input",d;d=b.find(c),d[0]||(b.append('<div class="t-dropdown-wrap t-state-default"><span class="t-input">&nbsp;</span><span class="t-select"><span class="t-icon t-arrow-down">select</span></span></div>').append(a.element),d=b.find(c)),a.span=d,a.arrow=b.find(".t-icon")},_wrapper:function(){var a=this,b=a.element,c=b[0],d="tabIndex",e;e=b.parent(),e.is("div.t-widget")||(e=b.wrap("<div />").parent()),e.attr(d)||e.attr(d,0),e[0].style.cssText=c.style.cssText,b.hide(),a._focused=a.wrapper=e.addClass("t-widget t-dropdown t-header").addClass(c.className)}});d.plugin("DropDownList",n)})(jQuery)