(function(a,b){function C(a,b){a=parseFloat(a,10);var c=Math.pow(10,b||0);return Math.round(a*c)/c}function B(a){return function(){return a}}function A(a){return function(b){return b+a}}function z(a){var b=a.is("input")?1:2;return"<div class='t-slider-track'><div class='t-slider-selection'><!-- --></div><a href='javascript:void(0)' class='t-draghandle' title='Drag'>Drag</a>"+(b>1?"<a href='javascript:void(0)' class='t-draghandle' title='Drag'>Drag</a>":"")+"</div>"}function y(a,b){var c="<ul class='t-reset t-slider-items'>",d=j.floor(C(b/a.smallStep,u))+1;for(i=0;i<d;i++)c+="<li class='t-tick'>&nbsp;</li>";c+="</ul>";return c}function x(a,b,c){var d="";b=="increase"?d=c?"t-arrow-next":"t-arrow-up":d=c?"t-arrow-prev":"t-arrow-down";return"<a class='t-button t-button-"+b+"'><span class='t-icon "+d+"' title='"+a[b+"ButtonTitle"]+"'>"+a[b+"ButtonTitle"]+"</span></a>"}function w(a,b,c){var d=c?" t-slider-horizontal":" t-slider-vertical",e=a.style?a.style:b.attr("style"),f=b.attr("class")?" "+b.attr("class"):"",g="";a.tickPlacement=="bottomRight"?g=" t-slider-bottomright":a.tickPlacement=="topLeft"&&(g=" t-slider-topleft"),e=e?" style='"+e+"'":"";return"<div class='t-widget t-slider"+d+f+"'"+e+">"+"<div class='t-slider-wrap"+(a.showButtons?" t-slider-buttons":"")+g+"'></div></div>"}var c=b.kendo,d=c.ui.Component,e=c.ui.Draggable,f=c.keys,g=a.extend,h=a.proxy,j=Math,k=c.support.touch,l="change",m="slide",n=k?"touchstart":"mousedown",o=k?"touchend":"mouseup",p="moveSelection",q="keydown",r=".t-draghandle",s=".t-slider-track",t=".t-tick",u=3,v=d.extend({init:function(a,b){var c=this;d.fn.init.call(c,a,b),b=c.options,c._distance=b.max-b.min,c._isHorizontal=b.orientation=="horizontal",c._position=c._isHorizontal?"left":"bottom",c._size=c._isHorizontal?"width":"height",b.tooltip.format=b.tooltip.enabled?b.tooltip.format||"{0}":"{0}",c._createHtml(),c.wrapper=c.element.closest(".t-slider"),c._trackDiv=c.wrapper.find(s),c._setTrackDivWidth(),c._maxSelection=c._trackDiv[c._size]();var e=c._maxSelection/((b.max-b.min)/b.smallStep),f=c._calculateItemsWidth(j.floor(c._distance/b.smallStep));c.options.tickPlacement!="none"&&e>=2&&(c._trackDiv.before(y(b,c._distance)),c._setItemsWidth(f),c._setItemsTitle(),c._setItemsLargeTick()),c._calculateSteps(f),c[b.enabled?"enable":"disable"](),c._keyMap={37:A(-b.smallStep),40:A(-b.smallStep),39:A(+b.smallStep),38:A(+b.smallStep),35:B(b.max),36:B(b.min),33:A(+b.largeStep),34:A(-b.largeStep)},c.bind([l,m],b)},options:{enabled:!0,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}},_setTrackDivWidth:function(){var a=this,b=parseFloat(a._trackDiv.css(a._position),10)*2;a._trackDiv[a._size](a.wrapper[a._size]()-2-b)},_setItemsWidth:function(b){var c=this,d=c.options,e=j.floor(c._distance/d.smallStep),f=c.wrapper.find(t),g;for(g=0;g<f.length-2;g++)a(f[g+1])[c._size](b[g]);c._isHorizontal?(a(f[0]).addClass("t-first")[c._size](b[e]),a(f[f.length-1]).addClass("t-last")[c._size](b[e-1])):(a(f[f.length-1]).addClass("t-first")[c._size](b[e]),a(f[0]).addClass("t-last")[c._size](b[e-1]));if(c._distance%d.smallStep!=0&&!c._isHorizontal){var h=0,i=2,k=0;for(g=0;g<b.length;g++)k+=b[g];h=c._maxSelection-k,h+=parseFloat(c._trackDiv.css(c._position),10)+i,c.wrapper.find(".t-slider-items").css("padding-top",h)}},_setItemsTitle:function(){var b=this,d=b.options,e=b.wrapper.find(t),f=d.min,g=b._isHorizontal?0:e.length-1,h=b._isHorizontal?e.length:-1,i=b._isHorizontal?1:-1;for(;g-h!=0;g+=i)a(e[g]).attr("title",c.format(d.tooltip.format,C(f,u))),f+=d.smallStep},_setItemsLargeTick:function(){var b=this,c=b.options,d;if(1e3*c.largeStep%(1e3*c.smallStep)==0){var e=b.wrapper.find(t),f={},g=C(c.largeStep/c.smallStep,u);if(b._isHorizontal)for(d=0;d<e.length;d=C(d+g,u))f=a(e[d]),f.addClass("t-tick-large").html("<span class='t-label'>"+f.attr("title")+"</span>");else for(d=e.length-1;d>=0;d=C(d-g,u))f=a(e[d]),f.addClass("t-tick-large").html("<span class='t-label'>"+f.attr("title")+"</span>"),d!=0&&d!=e.length-1&&f.css("line-height",f[b._size]()+"px")}},_calculateItemsWidth:function(a){var b=this,c=b.options,d=parseFloat(b._trackDiv.css(b._size))+1,e=d/b._distance;b._distance/c.smallStep-j.floor(b._distance/c.smallStep)>0&&(d-=b._distance%c.smallStep*e);var f=d/a,g=[];for(var h=0;h<a-1;h++)g[h]=f;g[a-1]=g[a]=f/2;return b._roudWidths(g)},_roudWidths:function(a){var b=0;for(i=0;i<a.length;i++)b+=a[i]-j.floor(a[i]),a[i]=j.floor(a[i]);b=j.round(b);return this._addAdditionalSize(b,a)},_addAdditionalSize:function(a,b){if(a==0)return b;var c=parseFloat(b.length-1)/parseFloat(a==1?a:a-1);for(var d=0;d<a;d++)b[parseInt(j.round(c*d))]+=1;return b},_calculateSteps:function(a){var b=this,c=b.options,d=c.min,e=0,f=a.length;i=1,a.splice(0,0,a.pop()*2),a.splice(f,1,a.pop()*2),b._pixelStepsArray=[e],b._valuesArray=[d];if(f!=0){while(i<f)e+=(a[i-1]+a[i])/2,b._pixelStepsArray[i]=e,b._valuesArray[i]=d+=c.smallStep,i++;var g=c.max%c.smallStep==0?f-1:f;b._pixelStepsArray[g]=b._maxSelection,b._valuesArray[g]=c.max}},_getValueFromPosition:function(a,b){var c=this,d=c.options,e=j.max(d.smallStep*(c._maxSelection/c._distance),0),f=0,g=e/2,h=0;c._isHorizontal?f=a-b.startPoint:f=b.startPoint-a;if(c._maxSelection-(parseInt(c._maxSelection%e)-3)/2<f)return d.max;for(var i=0;i<c._pixelStepsArray.length;i++)if(j.abs(c._pixelStepsArray[i]-f)-1<=g)return C(c._valuesArray[i],u)},_getDragableArea:function(){var a=this,b=a._trackDiv.offset().left,c=a._trackDiv.offset().top;return{startPoint:a._isHorizontal?b:c+a._maxSelection,endPoint:a._isHorizontal?b+a._maxSelection:c}},_createHtml:function(){var a=this,b=a.element,c=a.options;b.val(c.val),b.wrap(w(c,b,a._isHorizontal)).hide(),c.showButtons&&b.before(x(c,"increase",a._isHorizontal)).before(x(c,"decrease",a._isHorizontal)),b.before(z(b))}}),D=v.extend({init:function(a,b){var c=this;v.fn.init.call(c,a,b),b=c.options,c._setValueInRange(c.options.val);var d=c.wrapper.find(r);new D.Selection(d,c,c.options),c._drag=new D.Drag(d,"",c,c.options)},options:{val:0,showButtons:!0,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease"},enable:function(){var b=this,c=b.options;b.wrapper.removeAttr("disabled").removeClass("t-state-disabled").addClass("t-state-default");var d=function(c){if(a(c.target).hasClass("t-draghandle"))a(c.target).addClass("t-state-active");else{var d=b._isHorizontal?c.pageX:c.pageY,e=b._getDragableArea();b._update(b._getValueFromPosition(d,e)),b._drag.dragstart(c)}};b.wrapper.find(t).bind(n,d).end().find(s).bind(n,d),b.wrapper.find(r).bind(o,function(b){a(b.target).removeClass("t-state-active")});var e=h(function(a,d){var e=j.ceil(c.val/c.smallStep);e>=b._valuesArray.length-1||e<=0?this._setValueInRange(c.val+d*c.smallStep):this._setValueInRange(this._valuesArray[e+d*1])},b);if(c.showButtons){var f=h(function(a,b){a.which==1&&(e(a,b),this.timeout=setTimeout(h(function(){this.timer=setInterval(function(){e(a,b)},60)},this),200))},b);b.wrapper.find(".t-button").bind(o,h(function(a){this._clearTimer()},b)).bind("mouseover",function(b){a(b.currentTarget).addClass("t-state-hover")}).bind("mouseout",h(function(b){a(b.currentTarget).removeClass("t-state-hover"),this._clearTimer()},b)).eq(0).bind(n,h(function(a){f(a,1)},b)).end().eq(1).bind(n,h(function(a){f(a,-1)},b))}b.wrapper.find(r).bind(q,h(this._keydown,b)),c.enabled=!0},disable:function(){var a=this;a.wrapper.attr("disabled","disabled").removeClass("t-state-default").addClass("t-state-disabled"),a.wrapper.find(".t-button").unbind(n).bind(n,!1).unbind(o).bind(o,!1).unbind("mouseleave").bind("mouseleave",!1).unbind("mouseover").bind("mouseover",!1),a.wrapper.find(t).unbind(n).end().find(s).unbind(n),a.wrapper.find(r).unbind(o).unbind(q).bind(q,!1),a.options.enabled=!1},_update:function(a){var b=this,c=b.value()!=a;b.value(a),c&&b.trigger(l,{value:b.options.val})},value:function(a){var b=this,c=b.options;a=C(a,u);if(isNaN(a))return c.val;a>=c.min&&a<=c.max&&c.val!=a&&(b.element.val(a),c.val=a,b.refresh())},refresh:function(){this.trigger(p,{value:this.options.val})},_clearTimer:function(a){clearTimeout(this.timeout),clearInterval(this.timer)},_keydown:function(a){var b=this;a.keyCode in b._keyMap&&(b._setValueInRange(b._keyMap[a.keyCode](b.options.val)),a.preventDefault())},_setValueInRange:function(a){var b=this,c=b.options;a=C(a,u);isNaN(a)?b._update(c.min):(a=j.max(j.min(a,c.max),c.min),b._update(a))}});D.Selection=function(a,b,c){function d(d){var e=d-c.min,f=j.ceil(e/c.smallStep),g=b._pixelStepsArray[f],h=b._trackDiv.find(".t-slider-selection"),i=parseInt(a[b._size]()/2,10)+1;h[b._size](g),a.css(b._position,g-i)}d(b.value());var e=function(a){d(parseFloat(a.value,10))};b.bind([l,m,p],e)},D.Drag=function(a,b,c,d){var f=this;f.owner=c,f.options=d,f.dragHandle=a,f.dragHandleSize=a[c._size](),f.type=b,f.draggable=new e(a,{dragstart:h(f._dragstart,f),drag:h(f.drag,f),dragend:h(f.dragend,f)})},D.Drag.prototype={dragstart:function(a){this.draggable._startDrag(a)},_dragstart:function(b){var d=this,e=d.owner,f=d.options;if(!f.enabled){b.preventDefault();return!1}e.element.unbind("mouseover"),d.dragHandle.addClass("t-state-active"),d.dragableArea=e._getDragableArea(),d.step=j.max(f.smallStep*(e._maxSelection/e._distance),0),d.type?(d.selectionStart=f.selectionStart,d.selectionEnd=f.selectionEnd,e._setZIndex(d.type)):d.oldVal=d.val=f.val;if(f.tooltip.enabled){d.tooltipDiv=a("<div class='t-widget t-tooltip'><!-- --></div>").appendTo(document.body);var g="";if(d.type){var h=c.format(f.tooltip.format,d.selectionStart),i=c.format(f.tooltip.format,d.selectionEnd);g=h+" - "+i}else d.tooltipInnerDiv="<div class='t-callout t-callout-"+(e._isHorizontal?"s":"e")+"'><!-- --></div>",g=c.format(f.tooltip.format,d.val)+d.tooltipInnerDiv;d.tooltipDiv.html(g),d.moveTooltip()}},drag:function(a){var b=this,d=b.owner,e=b.options,f=c.touchLocation(a),g=b.dragableArea.startPoint,h=b.dragableArea.endPoint;d._isHorizontal?b.val=b.constrainValue(f.x,g,h,f.x>=h):b.val=b.constrainValue(f.y,h,g,f.y<=h);if(b.oldVal!=b.val){b.oldVal=b.val;if(b.type){b.type=="firstHandle"?b.val<b.selectionEnd?b.selectionStart=b.val:b.selectionStart=b.selectionEnd=b.val:b.val>b.selectionStart?b.selectionEnd=b.val:b.selectionStart=b.selectionEnd=b.val,d.trigger(m,{values:[b.selectionStart,b.selectionEnd]});if(e.tooltip.enabled){var i=c.format(e.tooltip.format,b.selectionStart),j=c.format(e.tooltip.format,b.selectionEnd);b.tooltipDiv.html(i+" - "+j)}}else d.trigger(m,{value:b.val}),e.tooltip.enabled&&b.tooltipDiv.html(c.format(e.tooltip.format,b.val)+b.tooltipInnerDiv);e.tooltip.enabled&&b.moveTooltip()}},dragend:function(a){var b=this,d=b.owner;a.keyCode==c.keys.ESC?d.refresh():b.type?d._update(b.selectionStart,b.selectionEnd):d._update(b.val),d.options.tooltip.enabled&&b.tooltipDiv.remove(),b.dragHandle.removeClass("t-state-active"),d.element.bind("mouseover");return!1},moveTooltip:function(){var a=this,b=a.owner,c=0,d=0,e=a.dragHandle.offset(),f=4,g=a.tooltipDiv.find(".t-callout");if(a.type){var h=b.wrapper.find(r),i=h.eq(0).offset(),j=h.eq(1).offset();b._isHorizontal?(c=j.top,d=i.left+(j.left-i.left)/2):(c=i.top+(j.top-i.top)/2,d=j.left)}else c=e.top,d=e.left;b._isHorizontal?(d+=C((a.dragHandle[b._size]()-a.tooltipDiv.outerWidth())/2)-1,c-=a.tooltipDiv.outerHeight()+g.height()+f):(c+=C((a.dragHandle[b._size]()-a.tooltipDiv.outerHeight())/2)-1,d-=a.tooltipDiv.outerWidth()+g.width()+f),a.tooltipDiv.css({top:c,left:d})},constrainValue:function(a,b,c,d){var e=this,f=0;b<a&&a<c?f=e.owner._getValueFromPosition(a,e.dragableArea):d?f=e.options.max:f=e.options.min;return f}},c.ui.plugin("Slider",D);var E=v.extend({init:function(a,b){var c=this;v.fn.init.call(c,a,b),b=c.options,c._setValueInRange(b.selectionStart,b.selectionEnd);var d=c.wrapper.find(r);new E.Selection(d,c,b),c._firstHandleDrag=new D.Drag(d.eq(0),"firstHandle",c,b),c._lastHandleDrag=new D.Drag(d.eq(1),"lastHandle",c,b)},options:{selectionStart:0,selectionEnd:10},enable:function(){var b=this,c=b.options;b.wrapper.removeAttr("disabled").removeClass("t-state-disabled").addClass("t-state-default");var d=function(d){if(a(d.target).hasClass("t-draghandle"))a(d.target).addClass("t-state-active");else{var e=b._isHorizontal?d.pageX:d.pageY,f=b._getDragableArea(),g=b._getValueFromPosition(e,f);g<c.selectionStart?(b._setValueInRange(g,c.selectionEnd),b._firstHandleDrag.dragstart(d)):g>b.selectionEnd?(b._setValueInRange(c.selectionStart,g),b._lastHandleDrag.dragstart(d)):g-c.selectionStart<=c.selectionEnd-g?(b._setValueInRange(g,c.selectionEnd),b._firstHandleDrag.dragstart(d)):(b._setValueInRange(c.selectionStart,g),b._lastHandleDrag.dragstart(d))}};b.wrapper.find(t).bind(n,d).end().find(s).bind(n,d),b.wrapper.find(r).bind("mouseup",function(b){a(b.target).removeClass("t-state-active")}),b.wrapper.find(r).eq(0).bind(q,h(function(a){this._keydown(a,"firstHandle")},b)).end().eq(1).bind(q,h(function(a){this._keydown(a,"lastHandle")},b)),b.enabled=!0},disable:function(){var a=this,b=a.options;a.wrapper.attr("disabled","disabled").removeClass("t-state-default").addClass("t-state-disabled"),a.wrapper.find(t).unbind(n).end().find(s).unbind(n),a.wrapper.find(r).unbind(o).unbind(q).bind(q,!1),a.enabled=!1},_keydown:function(a,b){var c=this,d=c.options.selectionStart,e=c.options.selectionEnd;a.keyCode in c._keyMap&&(b=="firstHandle"?(d=c._keyMap[a.keyCode](d),d>e&&(e=d)):(e=c._keyMap[a.keyCode](e),d>e&&(d=e)),c._setValueInRange(d,e),a.preventDefault())},_update:function(a,b){var c=this,d=c.values(),e=d[0]!=a||d[1]!=b;c.values(a,b),e&&c.trigger(l,{values:[a,b]})},values:function(){var b=this,c=b.options,d=0,e=0;if(arguments.length==0)return[c.selectionStart,c.selectionEnd];arguments.length==1&&a.isArray(arguments[0])?(d=arguments[0][0],e=arguments[0][1]):(d=C(arguments[0],u),e=C(arguments[1],u)),d>=c.min&&d<=c.max&&e>=c.min&&e<=c.max&&d<=e&&(c.selectionStart!=d||c.selectionEnd!=e)&&(b.element.find("input").eq(0).val(d).end().eq(1).val(e),c.selectionStart=d,c.selectionEnd=e,b.refresh())},refresh:function(){var a=this,b=a.options;a.trigger(p,{values:[b.selectionStart,b.selectionEnd]}),b.selectionStart==b.max&&b.selectionEnd==b.max&&a._setZIndex("firstHandle")},_setValueInRange:function(a,b){var c=this.options;a=j.max(j.min(a,c.max),c.min),b=j.max(j.min(b,c.max),c.min),a==c.max&&b==c.max&&this._setZIndex("firstHandle"),this._update(j.min(a,b),j.max(a,b))},_setZIndex:function(b){this.wrapper.find(r).each(function(c){a(this).css("z-index",b=="firstHandle"?1-c:c)})}});E.Selection=function(a,b,c){function e(a,c){var d=0,e=0,f=b._trackDiv.find(".t-slider-selection");d=j.abs(a-c),e=a<c?a:c,f[b._size](d),f.css(b._position,e-1)}function d(d){var f=d[0]-c.min,g=d[1]-c.min,h=j.ceil(f/c.smallStep),i=j.ceil(g/c.smallStep),k=b._pixelStepsArray[h],l=b._pixelStepsArray[i],m=parseInt(a.eq(0)[b._size]()/2,10)+1;a.eq(0).css(b._position,k-m).end().eq(1).css(b._position,l-m),e(k,l)}var f=b.element.find("input");d(b.values());var g=function(a){d(a.values)};b.bind([l,m,p],g)},c.ui.plugin("RangeSlider",E)})(jQuery,window)