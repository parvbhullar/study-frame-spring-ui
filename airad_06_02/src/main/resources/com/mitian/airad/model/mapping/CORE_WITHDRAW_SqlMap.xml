<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="CORE_WITHDRAW">
    <resultMap id="ibatorgenerated_BaseResultMap" class="com.mitian.airad.model.CoreWithdraw">
        <!--
        WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
        This element was generated on Thu Jan 27 09:21:17 CST 2011.
        -->
        <result column="DRAW_MONEY_ID" property="drawMoneyId" jdbcType="INTEGER"/>
        <result column="MEMBER_ID" property="memberId" jdbcType="LONG"/>
        <result column="DRAW_SUM_ID" property="drawSumId" jdbcType="INTEGER"/>
        <result column="DRAW_MONEY_SERIAL_ID" property="drawMoneySerialId" jdbcType="VARCHAR"/>
        <result column="DRAW_MONEY" property="drawMoney" jdbcType="DECIMAL"/>
        <result column="DRAW_TIME" property="drawTime" jdbcType="TIMESTAMP"/>
        <result column="STATUS" property="status" jdbcType="CHAR"/>
        <result column="DRAW_REMARK" property="drawRemark" jdbcType="VARCHAR"/>
        <result column="UNIONPAY_ID" property="unionpayId" jdbcType="VARCHAR"/>
        <result column="DRAW_NAME" property="drawName" jdbcType="VARCHAR"/>
        <result column="DRAW_BANK_NUM" property="drawBankNum" jdbcType="VARCHAR"/>
    </resultMap>
    <!-- 根据时间排序 -->
     <select id="selectAllOrderByTime" resultClass="com.mitian.airad.model.CoreWithdraw" parameterClass="map">
        select DRAW_MONEY_ID as drawMoneyId , MEMBER_ID as memberId, DRAW_SUM_ID as drawSumId, DRAW_MONEY_SERIAL_ID as drawMoneySerialId, 
        DRAW_MONEY as drawMoney , DRAW_TIME as drawTime,
        STATUS, DRAW_REMARK as drawRemark , UNIONPAY_ID as unionpayId, DRAW_NAME as drawName, DRAW_BANK_NUM as drawBankNum
        from CORE_WITHDRAW where MEMBER_ID = #memberId:LONG#
    <dynamic prepend=" order by ">
        <isNotEmpty property="descFlag">
           DRAW_TIME   DESC
        </isNotEmpty>
        <isNotEmpty property="asceFlag">
           DRAW_TIME   ASC
        </isNotEmpty>
    </dynamic>
      <isNotEmpty property="fromRecord">
      limit $fromRecord$,$pageSize$
    </isNotEmpty>

    </select>
    
    <!-- 通过会员id、时间查询所有提现记录信息分页 -->
    <select id="selectAllByMemberIdStatistic" resultMap="ibatorgenerated_BaseResultMap" parameterClass="java.util.HashMap">
        select DRAW_MONEY_ID, MEMBER_ID, DRAW_SUM_ID, DRAW_MONEY_SERIAL_ID, DRAW_MONEY, DRAW_TIME,
        STATUS, DRAW_REMARK, UNIONPAY_ID, DRAW_NAME, DRAW_BANK_NUM
        from CORE_WITHDRAW where MEMBER_ID = #memberId:LONG# AND DRAW_TIME LIKE '%$time$%' 
         <dynamic prepend="order by">
         <isNotEmpty property="descFlag">
           DRAW_TIME DESC
         </isNotEmpty>
         <isEmpty property="descFlag">
           DRAW_TIME ASC
         </isEmpty>
    </dynamic>
        limit $record$,$pageSize$
    </select>
    <!-- 通过会员id、时间查询所有提现记录条数分页 -->
    <select id="selectCountByMemberIdStatistic" resultClass="java.lang.Integer" parameterClass="java.util.HashMap">
        select count(*)
        from CORE_WITHDRAW where MEMBER_ID = #memberId:LONG# AND DRAW_TIME LIKE '%$time$%' 
    </select>
     <!-- 提现记录汇总 -->
    <select id="selectAll" resultMap="ibatorgenerated_BaseResultMap" parameterClass="java.util.HashMap">
        select DRAW_MONEY_ID, MEMBER_ID, DRAW_SUM_ID, DRAW_MONEY_SERIAL_ID, DRAW_MONEY DRAW_MONEY, DRAW_TIME,
        STATUS, DRAW_REMARK, UNIONPAY_ID, DRAW_NAME, DRAW_BANK_NUM
        from CORE_WITHDRAW GROUP BY MEMBER_ID
    <dynamic prepend="order by">
        <isNotEmpty property="asce">
               DRAW_TIME ASC 
        </isNotEmpty>
        <isEmpty property="asce">
           DRAW_TIME DESC
        </isEmpty>
    </dynamic>
    limit $record$,$pageSize$
    </select>
      <!-- 根据memberId和时间段批量查询提现记录 -->
       <select id="selectwithdrawByKeyAndTime"  parameterClass="java.util.HashMap" resultMap="ibatorgenerated_BaseResultMap">
        select DRAW_MONEY_ID, MEMBER_ID , DRAW_SUM_ID, DRAW_MONEY_SERIAL_ID, DRAW_MONEY, DRAW_TIME,
        STATUS, DRAW_REMARK, UNIONPAY_ID, DRAW_NAME, DRAW_BANK_NUM
        from CORE_WITHDRAW  where MEMBER_ID=#memberId:LONG# and DRAW_TIME LIKE '$time$%'
      </select>
    <!-- 查询开发者当天的提款次数 -->
    <select id="selectwithdrawCount"  parameterClass="java.lang.Long" resultMap="ibatorgenerated_BaseResultMap">
      select DRAW_MONEY_ID, MEMBER_ID , DRAW_SUM_ID, DRAW_MONEY_SERIAL_ID, DRAW_MONEY, DRAW_TIME,
        STATUS, DRAW_REMARK, UNIONPAY_ID, DRAW_NAME, DRAW_BANK_NUM
        from CORE_WITHDRAW where MEMBER_ID = #memberId# order by  DRAW_TIME desc  limit 0,3
    </select>
    
    <!-- 通过会员id查询所有提现记录信息分页 -->
    <select id="selectByMemberId" resultMap="ibatorgenerated_BaseResultMap" parameterClass="java.util.HashMap">
        select DRAW_MONEY_ID, MEMBER_ID, DRAW_SUM_ID, DRAW_MONEY_SERIAL_ID, DRAW_MONEY, DRAW_TIME,
        STATUS, DRAW_REMARK, UNIONPAY_ID, DRAW_NAME, DRAW_BANK_NUM
        from CORE_WITHDRAW where MEMBER_ID = #memberId:LONG# 
    <dynamic prepend="order by">
        <isNotEmpty property="asce">
               DRAW_TIME ASC 
        </isNotEmpty>
        <isEmpty property="asce">
           DRAW_TIME DESC
        </isEmpty>
    </dynamic>
    limit $record$,$pageSize$
    </select>
     <!-- 通过会员id查询所有提现记录信息 -->
    <select id="selectAllByMemberId" resultMap="ibatorgenerated_BaseResultMap" parameterClass="java.lang.Long">
        select DRAW_MONEY_ID, MEMBER_ID, DRAW_SUM_ID, DRAW_MONEY_SERIAL_ID, DRAW_MONEY, DRAW_TIME,
        STATUS, DRAW_REMARK, UNIONPAY_ID, DRAW_NAME, DRAW_BANK_NUM
        from CORE_WITHDRAW where MEMBER_ID = #memberId:LONG# 
    </select>
    <!-- 通过会员id查询提现记录的数量-->
	<select id="selectCountByMemberId" resultClass="java.lang.Integer" parameterClass="java.lang.Long">
		select count(*) from CORE_WITHDRAW where MEMBER_ID = #memberId:LONG#
	</select>

    <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.mitian.airad.model.CoreWithdraw">
        <!--
        WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
        This element was generated on Thu Jan 27 09:21:17 CST 2011.
        -->
        select DRAW_MONEY_ID, MEMBER_ID, DRAW_SUM_ID, DRAW_MONEY_SERIAL_ID, DRAW_MONEY, DRAW_TIME,
        STATUS, DRAW_REMARK, UNIONPAY_ID, DRAW_NAME, DRAW_BANK_NUM
        from CORE_WITHDRAW
        where DRAW_MONEY_ID = #drawMoneyId:INTEGER#
    </select>
    <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.mitian.airad.model.CoreWithdraw">
        <!--
        WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
        This element was generated on Thu Jan 27 09:21:17 CST 2011.
        -->
        delete from CORE_WITHDRAW
        where DRAW_MONEY_ID = #drawMoneyId:INTEGER#
    </delete>
    <insert id="ibatorgenerated_insert" parameterClass="com.mitian.airad.model.CoreWithdraw">
        <!--
        WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
        This element was generated on Thu Jan 27 09:21:17 CST 2011.
        -->
        insert into CORE_WITHDRAW (DRAW_MONEY_ID, MEMBER_ID, DRAW_SUM_ID, DRAW_MONEY_SERIAL_ID,
        DRAW_MONEY, DRAW_TIME, STATUS, DRAW_REMARK, UNIONPAY_ID, DRAW_NAME, DRAW_BANK_NUM)
        values (#drawMoneyId:INTEGER#, #memberId:LONG#, #drawSumId:INTEGER#,
        #drawMoneySerialId:VARCHAR#, #drawMoney:DECIMAL#, #drawTime:TIMESTAMP#, #status:CHAR#,
        #drawRemark:VARCHAR#, #unionpayId:VARCHAR#, #drawName:VARCHAR#, #drawBankNum:VARCHAR#)
    </insert>
    <insert id="ibatorgenerated_insertSelective" parameterClass="com.mitian.airad.model.CoreWithdraw">
        insert into CORE_WITHDRAW
        <dynamic prepend="(">
            <isNotNull prepend="," property="memberId">
                MEMBER_ID
            </isNotNull>
            <isNotNull prepend="," property="drawSumId">
                DRAW_SUM_ID
            </isNotNull>
            <isNotNull prepend="," property="drawMoneySerialId">
                DRAW_MONEY_SERIAL_ID
            </isNotNull>
            <isNotNull prepend="," property="drawMoney">
                DRAW_MONEY
            </isNotNull>
            <isNotNull prepend="," property="drawTime">
                DRAW_TIME
            </isNotNull>
            <isNotNull prepend="," property="status">
                STATUS
            </isNotNull>
            <isNotNull prepend="," property="drawRemark">
                DRAW_REMARK
            </isNotNull>
            <isNotNull prepend="," property="unionpayId">
                UNIONPAY_ID
            </isNotNull>
            <isNotNull prepend="," property="drawName">
                DRAW_NAME
            </isNotNull>
            <isNotNull prepend="," property="drawBankNum">
                DRAW_BANK_NUM
            </isNotNull>
            )
        </dynamic>
        values
        <dynamic prepend="(">
            <isNotNull prepend="," property="memberId">
                #memberId:LONG#
            </isNotNull>
            <isNotNull prepend="," property="drawSumId">
                #drawSumId:INTEGER#
            </isNotNull>
            <isNotNull prepend="," property="drawMoneySerialId">
                #drawMoneySerialId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="drawMoney">
                #drawMoney:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="drawTime">
                #drawTime:TIMESTAMP#
            </isNotNull>
            <isNotNull prepend="," property="status">
                #status:CHAR#
            </isNotNull>
            <isNotNull prepend="," property="drawRemark">
                #drawRemark:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="unionpayId">
                #unionpayId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="drawName">
                #drawName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="drawBankNum">
                #drawBankNum:VARCHAR#
            </isNotNull>
            )
        </dynamic>
		<selectKey resultClass="int" keyProperty="drawMoneyId">
			SELECT @@IDENTITY AS ID
		</selectKey>
    </insert>
    <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.mitian.airad.model.CoreWithdraw">
        <!--
        WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
        This element was generated on Thu Jan 27 09:21:17 CST 2011.
        -->
        update CORE_WITHDRAW
        <dynamic prepend="set">
            <isNotNull prepend="," property="memberId">
                MEMBER_ID = #memberId:LONG#
            </isNotNull>
            <isNotNull prepend="," property="drawSumId">
                DRAW_SUM_ID = #drawSumId:INTEGER#
            </isNotNull>
            <isNotNull prepend="," property="drawMoneySerialId">
                DRAW_MONEY_SERIAL_ID = #drawMoneySerialId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="drawMoney">
                DRAW_MONEY = #drawMoney:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="drawTime">
                DRAW_TIME = #drawTime:TIMESTAMP#
            </isNotNull>
            <isNotNull prepend="," property="status">
                STATUS = #status:CHAR#
            </isNotNull>
            <isNotNull prepend="," property="drawRemark">
                DRAW_REMARK = #drawRemark:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="unionpayId">
                UNIONPAY_ID = #unionpayId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="drawName">
                DRAW_NAME = #drawName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="drawBankNum">
                DRAW_BANK_NUM = #drawBankNum:VARCHAR#
            </isNotNull>
        </dynamic>
        where DRAW_MONEY_ID = #drawMoneyId:INTEGER#
    </update>
    <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.mitian.airad.model.CoreWithdraw">
        <!--
        WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
        This element was generated on Thu Jan 27 09:21:17 CST 2011.
        -->
        update CORE_WITHDRAW
        set MEMBER_ID = #memberId:LONG#,
        DRAW_SUM_ID = #drawSumId:INTEGER#,
        DRAW_MONEY_SERIAL_ID = #drawMoneySerialId:VARCHAR#,
        DRAW_MONEY = #drawMoney:DECIMAL#,
        DRAW_TIME = #drawTime:TIMESTAMP#,
        STATUS = #status:CHAR#,
        DRAW_REMARK = #drawRemark:VARCHAR#,
        UNIONPAY_ID = #unionpayId:VARCHAR#,
        DRAW_NAME = #drawName:VARCHAR#,
        DRAW_BANK_NUM = #drawBankNum:VARCHAR#
        where DRAW_MONEY_ID = #drawMoneyId:INTEGER#
    </update>
    <!-- 后台 -->
    <!-- 查找四月份记录for short time -->
    <select id="selectAllForShortTime" resultMap="ibatorgenerated_BaseResultMap" parameterClass="java.util.HashMap">
        select DRAW_MONEY_ID, MEMBER_ID, DRAW_SUM_ID, DRAW_MONEY_SERIAL_ID, DRAW_MONEY, DRAW_TIME,
        STATUS, DRAW_REMARK, UNIONPAY_ID, DRAW_NAME, DRAW_BANK_NUM
        from CORE_WITHDRAW where DRAW_TIME LIKE '2011-04%' 
         <dynamic prepend="order by">
         <isNotEmpty property="descFlag">
           DRAW_TIME DESC
         </isNotEmpty>
         <isEmpty property="descFlag">
           DRAW_TIME ASC
         </isEmpty>
    </dynamic>
        limit $record$,$pageSize$
    </select>
    <!-- 通过会员id、时间查询所有提现记录条数分页 -->
    <select id="selectCountForShortTime" resultClass="java.lang.Integer" parameterClass="java.util.HashMap">
        SELECT COUNT(*)
        FROM CORE_WITHDRAW WHERE  DRAW_TIME LIKE '2011-04%'  
    </select>
</sqlMap>
