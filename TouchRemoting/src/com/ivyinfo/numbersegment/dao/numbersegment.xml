<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap>
	<typeAlias alias="numberSegmentBean" type="com.ivyinfo.numbersegment.bean.NumberSegmentBean" />
	
	<!-- 新增号码段 -->
	<insert id="AddNumberSegment" parameterClass="numberSegmentBean">
		<![CDATA[
			INSERT INTO t_sys_number_segment(id,startseg,middleseg,endseg,state,orgid)
			VALUES(#id#,#startseg#,#middleseg#,#endseg#,#state#,#orgid#)
		]]>
	</insert>
	
	<!-- 修改号码段 -->
	<update id="UpdNumberSegment" parameterClass="numberSegmentBean">
		<![CDATA[
			UPDATE t_sys_number_segment SET 
			middleseg=#middleseg#,state=#state# 
			WHERE id=#id#
		]]>
	</update>
	
	<!-- 查找号码段 -->
	<select id="getNumberSegment" parameterClass="map" resultClass="numberSegmentBean">
		<![CDATA[
			select * from t_sys_number_segment
				where id = (select min(id) as id from t_sys_number_segment 
				where orgid = #orgid# and state = #state#)
		]]>
	</select>
	
</sqlMap>