<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap>
	<typeAlias alias="communicationBean" type="com.ivyinfo.communication.bean.CommunicationBean" />
	<!-- 查找所有的通讯录IM组 -->
	<select id="findAllCommunicationIM" parameterClass="map" resultClass="communicationBean">
		<![CDATA[
			SELECT id as imgid,groupname as imgroupname,
				superiorgroupid as imsuperiorgroupid,remark as imremark,
				timestemp as imtimestemp
			FROM $logname$_t_communication_group
		]]>
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="id">
				ID = #id#
			</isNotEmpty>
		</dynamic>
	</select>
	
	<!-- 新增通讯录IM组 -->
	<insert id="saveCommunicationIM" parameterClass="communicationBean">
		<![CDATA[
			INSERT INTO $logname$_t_communication_group(id,groupname,superiorgroupid,remark,timestemp)
			VALUES(#imgid#,#imgroupname#,#imsuperiorgroupid#,#imremark#,#imtimestemp#)
		]]>
	</insert>
	
	<!-- 修改通讯录IM组信息 -->
	<update id="updateCommunicationIM" parameterClass="communicationBean">
		<![CDATA[
			UPDATE $logname$_t_communication_group SET 
				groupname=#imgroupname#,superiorgroupid=#imsuperiorgroupid#,remark=#imremark#,
				timestemp=#imtimestemp#
			WHERE id=#imgid#
		]]>
	</update>
	
	<!-- 删除通讯录IM组信息 -->
	<delete id="deleteCommunicationIM" parameterClass="map">
		<![CDATA[
			DELETE FROM $logname$_t_communication_group
		]]>
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="id">
				ID = #id#
			</isNotEmpty>
		</dynamic>
	</delete>
	
	<statement id="CommunicationIMTable" parameterClass="String">
        create table $logname$_t_communication_group 
		(
		    id                   int                            not null,
		    groupname            varchar(50),
		    superiorgroupid      varchar(20),
		    remark               varchar(300),
		    timestemp            varchar(20),
		    remark1              varchar(50),
		    remark2              varchar(50),
		    remark3              varchar(50),
		    remark4              varchar(50),
		    remark5              varchar(50),
		    PRIMARY KEY  (id)
		)ENGINE=MyISAM DEFAULT CHARSET=gbk;
	</statement> 
	
	<statement id="DropCommunicationIMTable" parameterClass="String">
		DROP TABLE $logname$_t_communication_group;
	</statement>
</sqlMap>