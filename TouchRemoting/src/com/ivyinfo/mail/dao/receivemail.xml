<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap>
	<typeAlias alias="remBean" type="com.ivyinfo.mail.bean.ReceiveMailBean" />
	<!-- 添加接收邮件 -->
	<insert id="saveReceiveMail" parameterClass="remBean">
		<![CDATA[
			INSERT INTO $logname$(id,sendname,receivename,copyname,secretname,subject,content,filename,datetime,level,
				state,mailId,mailnumber)
			VALUES(#id#,#sendname#,#receivename#,#copyname#,#secretname#,#subject#,#content#,#filename#,#datetime#,#level#
				,#state#,#mailId#,#mailnumber#)
		]]>
	</insert>
	
	<!-- 查询收件箱所有邮件 -->
	<select id="findAllReceive" parameterClass="map" resultClass="remBean">
		<![CDATA[
			SELECT * FROM $logname$
		]]>
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="id">
				ID = #id#
			</isNotEmpty>
		</dynamic>
		<dynamic prepend="order by">
			<isNotNull property="order">
				$order$ $orderby$
			</isNotNull>
		</dynamic>
		<dynamic prepend="limit">
			<isNotNull property="from">
				#from#,#len#
			</isNotNull>
		</dynamic>
	</select>
	
	<!-- 删除收件箱邮件 -->
	<delete id="receiveRemove" parameterClass="map">
		<![CDATA[
			DELETE FROM $logname$
		]]>
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="id">
				ID = #id#
			</isNotEmpty>
		</dynamic>
	</delete>
	
	<!-- 查询收件箱所有邮件总记录数 -->
	<select id="receivecount" parameterClass="map" resultClass="String">
		<![CDATA[
			SELECT count(*) FROM $logname$
		]]>
	</select>
	
	<!-- 修改部门信息 -->
	<update id="findReceiveSign" parameterClass="map">
		<![CDATA[
			UPDATE $logname$ SET 
			state=#state#
		]]>
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="id">
				ID = #id#
			</isNotEmpty>
		</dynamic>
	</update>
	
	<statement id="ReceiveTable" parameterClass="String">
        CREATE TABLE $logname$_t_mail_receive (
		  id int(11) NOT NULL,
		  sendname varchar(100) default NULL,
		  receivename mediumtext,
		  copyname mediumtext,
		  secretname mediumtext,
		  subject varchar(1000) default NULL,
		  content longtext,
		  filename varchar(1000) default NULL,
		  datetime varchar(20) default NULL,
		  level varchar(10) default NULL,
		  state varchar(10) default NULL,
		  mailId varchar(1000) default NULL,
		  mailnumber varchar(100) default NULL,
		  remark1               varchar(50),
		    remark2               varchar(50),
		    remark3               varchar(50),
		    remark4               varchar(50),
		    remark5               varchar(50),
		  PRIMARY KEY  (id)
		) ENGINE=MyISAM DEFAULT CHARSET=gbk;
	</statement> 
	
	<statement id="DropReceiveTable" parameterClass="String">
		DROP TABLE $logname$_t_mail_receive;
	</statement> 
</sqlMap>